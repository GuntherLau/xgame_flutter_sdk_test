import{j as e,E as P,T as t,W as U,M as p,H as j,f as v,u as q,S as z,r as n,i as K,ag as r,N as Y,al as J,L as Q,k as A,h as X,c as O}from"./index-BRyeyo8a.js";import{C as Z}from"./currency-selector-CI5Ibmdo.js";import{B as u,S as h,W as b,g as ee}from"./bet-history-2tkMDqOn.js";function te({item:a}){const o=Number(a.winAmount)>0,i=()=>{switch(a.__status){case u.CANCLLED:return t.cancelled();case u.WIN:return t.win();case u.LOSE:return t.lose();case u.DRAW:return t.draw();default:return t.unsettlement()}},N=()=>{sessionStorage.setItem("bet_detail_data",JSON.stringify(a)),j.navigate(`${v.brBetDetail}`)};return e.jsxs("div",{className:"rounded-md bg-[var(--box-bg)] p-3",onClick:N,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-[#a3a3a7]",children:[P.currentLang()=="zh"?a.chineseName:a.englishName," ",a.gameKind&&e.jsxs("span",{className:"font-thin",children:["(",a.gameKind,")"]})]}),e.jsxs("div",{className:"text-sm text-[#58585f]",children:[e.jsxs("span",{className:"text-support",children:[t.bet_amount(),":"]})," ",e.jsxs("span",{className:"text-[#c2c3ca] text-lg",children:[" ",a.betAmount," "]}),e.jsx("span",{className:"text-support",children:a.currency})]})]}),e.jsxs("div",{className:"text-end",children:[[u.WIN,u.LOSE].includes(a.__status)&&e.jsxs("div",{className:"",children:[e.jsxs("span",{className:`text-xl font-semibold ${o?"text-[#adf100]":"text-[#ff2949]"}`,children:[o?"+":"",a.winAmount]}),e.jsxs("span",{className:"text-sm text-[#58585f] text-support",children:[" ",a.currency]})]}),e.jsx("div",{className:"text-[#a3a3a7] font-bold text-sm",children:i()})]})]}),e.jsx("div",{className:"h-[1px] my-3 bg-[var(--box-separator)]"}),e.jsxs("div",{className:"flex items-center justify-between text-[#58585f] text-sm",children:[e.jsx("span",{children:U(new Date(a.betTime))}),e.jsx(p,{color:"#58585f",name:"ic_chevon_right",className:"w-3 h-3"})]})]})}function re(){var R,D;const a=q(),o=new z(a.search),[i,N]=n.useState(o.findNumber("state",0)),[m,B]=n.useState(o.findNumber("time",1)),[l,W]=n.useState(o.findNumber("type",-1)),[w,S]=n.useState(!1),[T,L]=n.useState(!1),[x,E]=n.useState([]),[$,_]=n.useState(0),[M,F]=n.useState(!1),y=n.useRef(1),G=[t.all(),t.unsettlement(),t.win(),t.lose(),t.other().toLowerCase()],C=K(),V=n.useRef(null),I=[{type:-1,name:t.all()},{type:r.FUTURE,name:t.futures()},{type:r.HASH,name:t.hash()},{type:r.CRYPTO_GAME,name:t.crypto_game()},{type:r.NFT_GAME,name:t.nft_game()},{type:r.SLOTS,name:t.slots()},{type:r.FISHING,name:t.fishing()},{type:r.LIVE,name:t.live()},{type:r.CARD_GAME,name:t.card_games()},{type:r.SPORTS,name:t.sports()},{type:r.LOTTERY,name:t.lottery()}],k=async(s=!1)=>{var H;if(T)return;s?(L(!0),y.current+=1):(y.current=1,S(!0));const d=new Date;d.setHours(23,59,59,999);const g=new Date(d);g.setDate(d.getDate()-m+1),g.setHours(0,0,0,0);const c={betEndDateIso:O(d),betStartDateIso:O(g),page:y.current,rows:10};switch(i){case 1:c.settles=h.UNSETTLE;break;case 2:c.settles=h.SETTLE,c.winloseStatus=b.WIN;break;case 3:c.settles=h.SETTLE,c.winloseStatus=b.LOSE;break;case 4:c.settles=h.OTHER,c.winloseStatus=b.OTHER;break}l!=r.ALL&&(c.type=l);const f=await ee(c);(H=f.data)!=null&&H.data?(_(f.data.totalCount),E(s?[...x,...f.data.data]:f.data.data)):(E([]),_(0)),L(!1),S(!1)};return n.useEffect(()=>{k(),j.navigate(`${v.betHistory}?state=${i}&time=${m}&type=${l}`)},[m,l,i]),e.jsx(Y,{title:t.betting_record(),className:"max-w-[800px] mx-auto",onBack:()=>j.navigate(v.home),enableMenu:!1,hideRightEl:!0,tabEl:e.jsx(J,{onChange:N,selected:i,tabs:G,className:"px-2 sticky top-0 py-1 gap-2",itemClassName:"fundings-tab",selectedItemClassName:"tab-active"}),children:e.jsxs(e.Fragment,{children:[w&&e.jsx(Q,{className:"grow"}),!w&&e.jsxs("div",{ref:V,className:"flex flex-col overflow-hidden overflow-y-auto hide-scrollbar h-full grow",children:[e.jsxs("div",{className:"p-3 flex gap-3",children:[e.jsx(A,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)]",children:(R=C.find(s=>s.value==m))==null?void 0:R.name}),e.jsx(p,{color:"var(--text-content-color)",name:"ic_arrow_down",className:"w-3 h-3"})]}),children:C.map(s=>e.jsxs("div",{onClick:()=>{B(s.value)},className:"flex items-center justify-between px-4 py-2",children:[e.jsx("span",{className:`${s.value==m?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.value==m&&e.jsx(p,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))}),e.jsx(A,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)]",children:(D=I.find(s=>s.type==l))==null?void 0:D.name}),e.jsx(p,{color:"var(--text-content-color)",name:"ic_arrow_down",className:"w-3 h-3"})]}),children:I.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 min-",onClick:()=>{W(s.type)},children:[e.jsx("span",{className:`${s.type==l?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.type==l&&e.jsx(p,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))})]}),x.length==0&&e.jsx(X,{className:"grow"}),x.length>0&&e.jsxs("div",{className:"p-3 pt-0 flex flex-col gap-2",children:[x.map((s,d)=>e.jsx(te,{item:s},"bet_item_"+d.toString())),x.length<$&&e.jsx("div",{className:"flex justify-center mt-3",children:T?e.jsx("div",{className:"loader2 self-center w-6"}):e.jsx("div",{onClick:()=>k(!0),className:"text-sm text-[#444547] text-center",children:t.show_more()})})]}),e.jsx(Z,{onChange:()=>{},onClose:()=>F(!1),open:M})]})]})})}export{re as BetHistoryView};
