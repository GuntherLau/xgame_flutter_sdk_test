import{u as N,U as v,m as w,r as n,Q as y,l as _,G as k,H as a,f as g,j as e,N as C,T as l,C as I,M as o,L as T}from"./index-BRyeyo8a.js";import{c as P}from"./deposit-DeSSEGEb.js";function L(){var x,f;const u=N(),{orderId:i}=v();w();const m=new URLSearchParams(u.search),[d,h]=n.useState(null),[c,p]=n.useState(null),[s,b]=n.useState(null);n.useEffect(()=>{if(i){h(m.get("viewType")),p(y(m.get("link")??""));const t=setInterval(async()=>{j()},3e3);return()=>clearInterval(t)}},[]),n.useEffect(()=>{(s==null?void 0:s.status)==3&&(_.emit(k.refreshUserInfo),a.navigate(g.walletToken,{replace:!0})),(s==null?void 0:s.status)==4&&a.navigate("/deposit/failed",{replace:!0})},[s]);const j=async()=>{try{const t=await P({orderNo:i});t&&t.id&&b(t)}catch(t){console.log(t)}};return e.jsx(C,{title:l.recharge_info(),onBack:()=>a.navigate("/wallet?type=deposit&method=fiat",{replace:!0}),className:"max-w-[800px] mx-auto ",children:i&&s&&c?e.jsxs(e.Fragment,{children:[d==1&&e.jsx(I,{src:c,className:"min-h-[300px] relative w-full"}),d==2&&e.jsx("iframe",{src:c,className:"w-full h-full costumed-Iframe",allow:"fullscreen",frameBorder:"0",loading:"lazy",title:"Payment Iframe",children:"Error"}),e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"w-full rounded-b-2xl pt-7 pb-6 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"w-full text-center text-[var(--active)] text-2xl flex items-baseline justify-center",children:["$ ",e.jsxs("span",{className:"text-5xl font-medium",children:[" ",s.amount," "]}),e.jsx("button",{className:"w-7 h-7 bg-[var(--box-bg)] flex items-center justify-center rounded-full ml-4 self-center cursor-pointer",onClick:()=>a.copy(s.amount),children:e.jsx(o,{onClick:()=>a.copy(s.amount),color:"var(--text-color)",name:"ic_copy",className:"w-3.5 h-3.5 inline cursor-pointer"})})]}),e.jsxs("p",{className:"text-base mt-2 text-center",children:[l.please()," ",e.jsx("span",{className:"text-[var(--active)]",children:l.transfer_money()}),l.as_soon_as()]}),e.jsxs("p",{className:"w-full text-center text-[#f17e3b]",children:[" (",l.note_transfer_deposit(),") "]})]})}),e.jsx("div",{className:"w-full mt-3 rounded-2xl",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-b-[var(--box-separator)] text-lg",children:[e.jsxs("label",{className:"font-light",children:[l.deposit_methods(),"："]}),e.jsx("span",{children:s==null?void 0:s.payTypeName})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-b-[var(--box-separator)] text-lg",children:[e.jsxs("label",{className:"font-light",children:[l.transaction_time(),"："]}),e.jsx("span",{children:s==null?void 0:s.addTime})]}),e.jsxs("div",{className:"w-full overflow-hidden flex items-center justify-between py-3 border-b border-b-[var(--box-separator)] text-lg",children:[e.jsxs("label",{className:"font-light whitespace-nowrap",children:[l.order_number(),"："]}),e.jsxs("div",{className:"w-full overflow-hidden flex items-center",children:[e.jsx("span",{className:"font-medium mr-1 w-[calc(100%_-_45px)] text-ellipsis overflow-hidden",children:s==null?void 0:s.orderNo}),e.jsx("button",{className:"w-7 h-7 bg-[var(--box-bg)] flex items-center justify-center rounded-full ml-4 self-center cursor-pointer",onClick:()=>a.copy(s==null?void 0:s.orderNo),children:e.jsx(o,{onClick:()=>a.copy(s==null?void 0:s.orderNo),color:"var(--text-color)",name:"ic_copy",className:"w-3.5 h-3.5 inline cursor-pointer"})})]})]}),(s==null?void 0:s.remarks)&&e.jsxs("div",{className:"w-full overflow-hidden flex items-center justify-between py-3 border-b border-solid border-[#f6f6f8] text-lg",children:[e.jsxs("label",{className:"font-light whitespace-nowrap",children:[l.remark(),"："]}),e.jsxs("div",{className:"w-full overflow-hidden flex items-center",children:[e.jsx("span",{className:"font-medium mr-1 w-[calc(100%_-_45px)] text-ellipsis overflow-hidden",children:(f=(x=s==null?void 0:s.remarks)==null?void 0:x.split("："))==null?void 0:f.pop()}),e.jsx("button",{className:"w-7 h-7 bg-[var(--box-bg)] flex items-center justify-center rounded-full ml-4 self-center cursor-pointer",onClick:()=>{var t,r;return a.copy((r=(t=s==null?void 0:s.remarks)==null?void 0:t.split("："))==null?void 0:r.pop())},children:e.jsx(o,{onClick:()=>{var t,r;return a.copy((r=(t=s==null?void 0:s.remarks)==null?void 0:t.split("："))==null?void 0:r.pop())},color:"var(--text-color)",name:"ic_copy",className:"w-3.5 h-3.5 inline cursor-pointer"})})]})]})]})}),e.jsx("div",{className:"px-4 pt-4 pb-1",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-[#c50000]",children:["* ",l.important_reminder()]}),e.jsxs("ol",{className:"text-xs ml-2 mt-2 text-[#bbbbbc]",children:[e.jsxs("li",{className:"flex items-baseline",children:[e.jsx("span",{className:"mr-1.5",children:"1."}),e.jsxs("p",{className:"leading-[1.5]",children:[l.unsure_deposit(),e.jsx("span",{children:l.deposit_tutorial()}),l.visit_deposit(),e.jsx("span",{className:"text-[#f16d00] border-b border-solid border-[#f16d00] cursor-pointer",onClick:a.clickOnlineService,children:l.online_service()})]})]}),e.jsxs("li",{className:"flex items-baseline mt-0.5",children:[e.jsx("span",{className:"mr-1.5",children:"2. "}),e.jsx("p",{children:l.validity_period_deposit()})]}),e.jsxs("li",{className:"flex items-center mt-0.5",children:[e.jsx("span",{className:"mr-1.5",children:"3. "}),e.jsxs("p",{children:[l.any_question(),e.jsx("span",{className:"text-[#f16d00] border-b border-solid border-[#f16d00] cursor-pointer",onClick:a.clickOnlineService,children:l.online_service()})]})]})]})]})})]}):e.jsx(T,{className:"grow"})})}export{L as OnlineTransferView};
