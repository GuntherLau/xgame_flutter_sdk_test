import{j as e,C as Q,H as g,aY as f,bZ as W,b_ as z,b$ as B,R as w,c0 as X,c1 as Z,r as l,b as K,c2 as ee,Q as se,c3 as L,c4 as te,T as o,aa as G,F as ae,c5 as ne,c6 as re,aX as oe,c7 as le,c8 as ie,f as ce,O as me,U as de,A as ue,c9 as xe,N as pe,M as ge,L as fe}from"./index-BRyeyo8a.js";function he({item:t,className:a=""}){return e.jsx("div",{className:a,children:e.jsx(Q,{className:"object-cover w-full",src:g.getRemoteImgPath(t.imageUrl),alt:""})})}function ve({item:t,className:a=""}){return e.jsx("div",{className:a,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:f(t.imageUrl).body.innerHTML}})})}function je({item:t,className:a=""}){return e.jsx("div",{className:a,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:f(t.imageUrl).body.innerHTML}})})}function be({item:t,className:a=""}){const h=W(),{gameLivePair:u,setGameLivePair:i,getProviders:P,getGames:U,getGameLivePair:H,games:v,favs:N,setFav:_}=z(),{isConnected:S,createConnection:R}=B(),j=w(X),{closeModalCurrentSupport:D,handlePlay3rdGame:F,currentGame:y,supportCurrentGameListCurrency:k,currentGameRef:q,currentGameScreenLanscapeModeRef:Y,thirdGameUrl:I,setThirdGameUrl:E,isShowModalCurrentSupport:V}=Z(),[C,$]=l.useState([]),{isLogin:O}=w(K),d=w(ee),[A,M]=l.useState(!1);l.useEffect(()=>{var s,n,r;if(j!=""&&!S){const x=se(j),c=JSON.parse(x);L.updateMqtt(((s=c.find(m=>m.field=="host"))==null?void 0:s.value)??"");const p=(n=c.find(m=>m.field=="username"))==null?void 0:n.value,b=(r=c.find(m=>m.field=="password"))==null?void 0:r.value;try{R(L.mqttUrl,p,b)}catch(m){console.log("mqtt connection error",m)}}},[j]),l.useEffect(()=>{var s;d&&((s=d==null?void 0:d.data)==null?void 0:s.length)>0&&i(d.data)},[d]),l.useEffect(()=>{const s=Number(sessionStorage.getItem("promotion_detail.location")??"0");s&&!isNaN(s)?setTimeout(()=>{window.scrollTo({top:s}),sessionStorage.removeItem("promotion_detail.location"),M(!0)},100):M(!0),U(),P(),H()},[]),l.useEffect(()=>{var n;const s=(((n=t.games)==null?void 0:n.split(","))??[]).map(r=>+r);if(v.length||s.length==0){const r=v.filter(c=>s.includes(c.gameId)),x=[];for(const c of s){const p=r.find(b=>b.gameId==c);p&&x.push(p)}$(x)}},[v]);const J=()=>{var s;if(t.adsUrl.includes("https://xgame.cgcg.cc")){const n=t.adsUrl.replace("https://xgame.cgcg.cc","");g.navigate(n)}else(s=window.open(t.adsUrl,"_blank"))==null||s.focus()},T=s=>{if(!O){h(ce.login,{state:{previousPath:location.pathname}});return}const n=window.scrollY||document.documentElement.scrollTop;sessionStorage.setItem("promotion_detail.location",n+""),F(s)};return e.jsxs("div",{className:`${a} ${A?"":"invisible"}`,children:[e.jsxs("div",{className:"mx-auto bg-[var(--bg-8)] pc:relative overflow-hidden overflow-y-auto hide-scrollbar h-full",children:[t.bannerUrl&&e.jsx(te,{src:g.getRemoteImgPath(t.bannerUrl),alt:`${t.bannerUrl}`,className:"w-full",aspectRatio:281/122}),e.jsxs("div",{className:"mx-3 mt-4",children:[t.originName&&e.jsx("div",{className:"max-h-14 text-xl font-medium mb-1 line-clamp-2",children:t.originName}),t.startTime&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-2 text-sm text-[#9a9a9a]",children:[o.start_time(),G(t.startTime).format("YYYY-MM-DD HH:mm")]})}),t.endTime&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-sm text-[#9a9a9a]",children:[o.end_time(),G(t.endTime).format("YYYY-MM-DD HH:mm"),o.deadline()]})}),e.jsxs("div",{className:"text-sm text-[#9a9a9a]",children:[o.promotions_event_object(),": ",o.all_member()]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(ae,{onClick:()=>{J()},title:o.join_now(),className:"text-black uppercase my-6 max-w-[375px]"})}),t.imageUrl&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 mb-1 text-base uppercase text-nowrap",children:o.promotions_event_content()}),e.jsx("div",{dangerouslySetInnerHTML:{__html:f(t.imageUrl).body.innerHTML}})]}),C.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 mb-2 text-base uppercase text-nowrap",children:o.promotions_event_related()}),e.jsx("div",{className:"flex overflow-hidden overflow-x-auto hide-scrollbar w-full mb-4 gap-2",children:C.map((s,n)=>e.jsxs(l.Fragment,{children:[" ",s.category=="future"&&u.length>0&&u.filter(r=>r.pair==s.gameCode).map(r=>e.jsx(ne,{game:s,name:s.gameName,onClick:()=>T(s),loading:y==s.gameId,future:r,isFav:N.includes(s.gameId),setIsFav:_,classNames:"!h-[164px] !w-auto"},s.gameId)),["lottery","hash"].includes(s.category)&&e.jsx(re,{classNames:"mr-1.5 !min-w-fit",imgClassName:"!h-[164px] !w-auto",name:"",onClick:()=>T(s),loading:y==s.gameId,game:s,isFav:N.includes(s.gameId),setIsFav:_},s.gameId)]},n))})]}),t.content&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 mb-2 text-base uppercase text-nowrap",children:o.promotions_event_details()}),e.jsx("div",{dangerouslySetInnerHTML:{__html:f(t.content).body.innerHTML}})]}),e.jsx(oe,{className:"mx-auto mb-10 mt-12 w-[150px]",index:"3"})]})]}),e.jsx(le,{gameId:q.current,isLandscapeMode:Y.current,gameUrl:I,onClose:()=>E(""),open:!!I}),e.jsx(ie,{supportCurrentGameListCurrency:k,onClose:()=>D(),open:V})]})}const we=me({key:"promotion_detail",default:void 0});function _e(){const{id:t}=de(),[a,h]=ue(we);l.useEffect(()=>{(a==null?void 0:a.id)!=Number(t)&&xe(t).then(i=>{i!=null&&i.data&&h(i==null?void 0:i.data)})},[t]);const u=l.useCallback(()=>{switch(a==null?void 0:a.templateType){case 0:return e.jsx(he,{item:a});case 1:return e.jsx(ve,{item:a});case 2:return e.jsx(je,{item:a});case 4:return e.jsx(be,{item:a});default:return e.jsx(e.Fragment,{})}},[a]);return e.jsx(pe,{enableMenu:!0,customPaddingTop:0,rightEl:e.jsx(ge,{color:"white",name:"ic_support",className:"w-5 h-5",onClick:g.clickOnlineService}),headerClasses:"bg-transparent !bg-gradient-to-b !from-[var(--navbar-bg)] !to-transparent",children:a?u():e.jsx(fe,{className:"grow h-full mt-[10vh]"})})}export{_e as PromotionsDetailView};
