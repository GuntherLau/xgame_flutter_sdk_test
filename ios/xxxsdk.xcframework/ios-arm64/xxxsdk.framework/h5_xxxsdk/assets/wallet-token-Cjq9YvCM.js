import{u as Y,r as u,a as Q,R as V,b as J,c as H,j as e,N as K,T as r,C as d,H as f,d as I,e as W,f as g,S as k,g as T,h as P,i as ee,k as S,M as N,l as G,G as M,s as se}from"./index-BRyeyo8a.js";/* empty css                     */import{T as w,g as ae,F as D}from"./common-BzoKyodQ.js";import{g as te,B as le,D as ce,W as re,E as ne,C as ie}from"./funding-item-BeAwBoRX.js";const $={ALL:-1,ACCEPTING:1,PROCESSING:2,ACCEPTED:3,FAILED:4},oe={WALLET:"wallet",HISTORY:"history"};function pe(){var R;const n=Y(),[c,h]=u.useState(oe.WALLET),[l,y]=u.useState([]),[j,_]=u.useState(1),[b,C]=u.useState(w.ALL_FUNDING),[p,L]=u.useState($.ALL),[m,v]=u.useState(!1),{defaultWallet:a,allWalletsHasMoney:t}=Q(),{isLogin:i}=V(J),z=()=>{try{v(!0),G.emit(M.checkMoney),setTimeout(()=>v(!1),1e3)}catch{v(!1)}},F=s=>{f.navigate(g.walletToken+`?type=${s}`,{replace:!0}),h(s)},A=async(s,o)=>{if(!(s!=null&&s.status)){f.showError(r.temporarily_unavailable());return}if(!s||s.checked){f.showInfoToast(r.off_main_wallet_hint());return}const x={currency:s.tokenSymbol||s.currency};await se(x),G.emit(M.refreshUserInfo)};u.useEffect(()=>{n.search.includes("history")&&h("history")},[n]),u.useEffect(()=>{O()},[p,b,j]);const O=async()=>{try{const s=new Date;s.setHours(23,59,59,999);const o=new Date(s);o.setDate(s.getDate()-j+1),o.setHours(0,0,0,0);const x={page:1,rows:50,dateFromIso:H(o),dateToIso:H(s),transferType:b==w.ALL?w.ALL_FUNDING:b};p!=$.ALL&&(p==$.FAILED?x.statusList="4,5,6":x.status=p);const Z=await te(x);y(Z.data)}catch(s){console.log(s)}},U=s=>{f.navigate(`${g.fundingDetail}?orderNo=${s.orderNo}&type=${s.type}&bonusClassify=${s.bonusClassify}`)},q=s=>{_(s)},B=s=>{C(s)},X=s=>{L(s)},E=(s,o,x)=>{if(x&&!i){f.navigate(g.login);return}setTimeout(()=>{f.navigate(s,o)},0)};return e.jsx(K,{title:r.wallet(),className:"agent-bg",headerClasses:"agent-header",contentClassName:"!bg-transparent",hideRightEl:!0,children:e.jsxs("div",{className:"py-3",children:[e.jsxs("div",{className:"flex justify-start items-center px-3 ",children:[e.jsx("span",{className:"mr-2 text-[#f3ffc9] capitalize",children:`${r.current_wallet()}:`}),e.jsxs("span",{className:"text-[#f3ffc9]",children:[a==null?void 0:a.currency," ",a!=null&&a.currencyName?`(${a.currencyName})`:""]})]}),e.jsxs("div",{className:"flex items-center justify-start mt-3 px-3 ",children:[e.jsx(d,{src:f.getCurrencyIcon(a==null?void 0:a.currency),className:"w-11 h-11 circle",alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-between ml-3 h-full",children:[e.jsxs("div",{className:"flex text-left items-end",children:[e.jsx("span",{className:"mr-2 h-[28px]",children:m?e.jsx("div",{className:"w-[80px] ml-5 h-[20px] text:",children:e.jsx("div",{className:"loader-3-dot scale-50"})}):e.jsx("span",{className:"text-2xl",children:Number(a==null?void 0:a.money)>0?I(((a==null?void 0:a.money)||0).toFixed(6)):"0.00"})}),e.jsx("span",{className:"text-base",children:(a==null?void 0:a.currency)||"-"}),e.jsx(W,{disabled:m,actionELClassName:"ml-1",alignCenter:!0,className:"!bg-white max-h-[400px] !min-w-[280px] overflow-y-scroll overflow-x-hidden hide-scrollbar",actionEL:e.jsx("div",{className:"px-2",style:m?{opacity:.5}:{},children:e.jsx(d,{src:"/assets/icon/arrow-down-wbg.png",className:"w-4 h-4 circle",alt:""})}),children:t.map((s,o)=>e.jsxs(u.Fragment,{children:[e.jsxs("div",{className:"w-full flex justify-between items-center bg-white bg-transparent px-3 py-3 rounded-md",onClick:()=>{A(s)},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{src:f.getCurrencyIcon(s==null?void 0:s.currency),className:"w-8 h-8 circle",alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-between ml-2 h-full",children:[e.jsx("span",{className:"text-sm text-black",children:s==null?void 0:s.currencyName}),e.jsx("p",{className:"!text-xs text-red-400 capitalize mb-1",children:s!=null&&s.status?null:` ${r.temporarily_unavailable()}`}),e.jsxs("div",{className:"flex text-left items-end",children:[e.jsxs("span",{className:"text-sm text-black",children:[r.balance(),"："]}),e.jsxs("span",{className:"text-sm text-black mr-1",children:[" ",I(((s==null?void 0:s.money)||0).toFixed(6))]}),e.jsx("span",{className:"text-sm text-black",children:s==null?void 0:s.currency})]})]})]}),(s==null?void 0:s.currency)===(a==null?void 0:a.currency)&&e.jsx(d,{src:"/assets/icon/checked-green-bg-icon.png",className:"w-5 h-5 circle",alt:""})]}),e.jsx("div",{className:"h-[1px] bg-[#f2f2f2]"})]},o))}),e.jsx("div",{className:"rounded-md flex items-center ml-1",onClick:()=>{z()},children:e.jsx("svg",{className:`h-5 w-5 arrow  ${m?"rotate-animation":""}`,viewBox:"0 0 15 15",color:"var(--chip-text)","data-markup":"balance_viewer_arrow",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:"currentColor"})})})]}),e.jsx("div",{children:e.jsxs("span",{className:"text-sm flex items-end",children:[m?e.jsx("span",{className:"w-[80px] ml-5 mr-1 h-[20px]",children:e.jsx("div",{className:"loader-3-dot scale-50"})}):e.jsxs(e.Fragment,{children:["≈",(a==null?void 0:a.balanceInSystemCurrency)&&I((R=(a==null?void 0:a.balanceInSystemCurrency)||0)==null?void 0:R.toFixed(6))]}),e.jsx("span",{className:"text-xs ml-1",children:a==null?void 0:a.exchangeCurrency})]})})]})]}),e.jsxs("div",{className:"flex justify-around items-center mt-10",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",onClick:()=>E(g.wallet+"?type=deposit&method=fiat",void 0,!1),children:[e.jsx(d,{src:"/assets/icon/wallet-icon.png",className:"w-11 h-auto circle",alt:""}),e.jsx("span",{className:"mt-1 capitalize",children:r.deposit()})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",onClick:()=>E("/wallet?type=withdraw&method=fiat",void 0,!0),children:[e.jsx(d,{src:"/assets/icon/credit-icon.png",className:"w-11 h-auto circle",alt:""}),e.jsx("span",{className:"mt-1 capitalize",children:r.withdraw_2()})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",onClick:()=>{const o=new k(n.search).findString("exchangeTo","");let x="";(o==null?void 0:o.length)>0&&(x=`?exchangeTo=${o}`),E(g.exchangeMoney+x,void 0,!0)},children:[e.jsx(d,{src:"/assets/icon/exchange-icon.png",className:"w-11 h-auto circle",alt:""}),e.jsx("span",{className:"mt-1 capitalize",children:r.exchange_money()})]})]}),e.jsxs("div",{className:"w-full h-[40px] min-h-[40px] max-h-[40px] overflow-hidden overflow-x-auto hide-scrollbar flex items-center  rounded-t-xl mt-7 bg-[#1a1a1d] font-bold wallet-token-tab-container",children:[e.jsxs("div",{className:"flex flex-1 rounded-t-xl h-[95%] w-full cursor-pointer",onClick:()=>F("wallet"),children:[e.jsx("div",{className:"h-full w-[20px] tabs-right flex",children:e.jsx("div",{className:`h-full w-full rounded-tl-xl ${c=="wallet"?"bg-gradient-to-b from-[#29292e] to-[#222227] wallet-token-tab-active-left":""}`})}),e.jsxs("div",{className:`relative h-full w-full flex justify-center items-center font-semibold py-4 px-3 whitespace-nowrap ${c=="wallet"?"wallet-token-tab-active":"wallet-token-tab-no-active pr-6"}`,children:[c=="wallet"&&e.jsx(d,{src:"/assets/icon/light-bar-dot.png",className:"w-23 h-auto circle mx-auto absolute bottom-[-1px]",alt:""}),e.jsx("span",{className:"",children:r.my_currency()})]}),c=="wallet"?e.jsx("div",{className:"h-full w-[20px] tabs-right flex",children:e.jsx("div",{className:`h-full w-full rounded-tr-xl ${c=="wallet"?"bg-gradient-to-b from-[#29292e] to-[#222227] wallet-token-tab-active-left":""}`})}):e.jsxs("div",{className:`h-full opacity-0 ${c=="wallet"?"w-[30px]":" w-[15px]"} tabs-right flex`,children:[e.jsx("div",{className:`h-full w-1/2 ${c=="wallet"?"tabs-right_left":""} `}),e.jsx("div",{className:`h-full w-1/2 ${c=="wallet"?"bg-gradient-to-b from-[#29292e] to-[#222227] tabs-right_right":""} `})]})]}),e.jsxs("div",{className:"flex flex-1 rounded-t-xl h-[95%] w-full cursor-pointer",onClick:()=>F("history"),children:[e.jsx("div",{className:"h-full w-[20px] tabs-right flex",children:e.jsx("div",{className:`h-full w-full rounded-tl-xl ${c=="history"?"bg-gradient-to-b from-[#29292e] to-[#222227] wallet-token-tab-active-left":""}`})}),e.jsxs("div",{className:`relative h-full w-full flex justify-center items-center font-semibold py-4 px-3 whitespace-nowrap ${c=="history"?"wallet-token-tab-active":"wallet-token-tab-no-active px-6"}`,children:[c=="history"&&e.jsx(d,{src:"/assets/icon/light-bar-dot.png",className:"w-23 h-auto circle mx-auto absolute bottom-[-1px]",alt:""}),r.transaction_history()]}),c=="history"?e.jsx("div",{className:"h-full w-[20px] tabs-right flex",children:e.jsx("div",{className:`h-full w-full rounded-tr-xl ${c=="history"?"bg-gradient-to-b from-[#29292e] to-[#222227] wallet-token-tab-active-left":""}`})}):e.jsx("div",{className:"h-full w-[15px] tabs-right flex bg-gradient-to-b from-[#29292e] to-[#222227] opacity-0 rounded-tr-xl"})]})]}),e.jsxs("div",{className:"w-full pt-1",children:[c=="wallet"&&e.jsx(xe,{isRefeshing:m,walletTokenList:t,onChangeWallets:A}),c=="history"&&e.jsx(de,{historyList:l,selectedTime:j,selectedTrantype:b,selectedStatus:p,handleChangeTime:q,handleChangeType:B,handleChangeStatus:X,onHandleGoDetail:U})]})]})})}function xe({walletTokenList:n,onChangeWallets:c,isRefeshing:h}){return e.jsx("div",{className:"flex flex-col items-center justify-between mx-3 pb-10",children:n!=null&&n.length?n.map((l,y)=>e.jsxs("div",{className:"w-full mt-2 flex justify-between bg-[#242427] px-3 py-4 rounded-md wallet-token-item",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(d,{src:f.getCurrencyIcon(l==null?void 0:l.currency),className:"w-11 h-11 circle",alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-between ml-3 h-full w-full",children:[e.jsxs("span",{className:"text-base",children:[l.currency," ",l.currencyName?`(${l.currencyName})`:"",e.jsx("p",{className:"!text-xs text-red-400 capitalize",children:l!=null&&l.status?null:` ${r.temporarily_unavailable()}`})]}),e.jsxs("div",{className:"h-[28px] flex items-baseline text-end",children:[e.jsx("div",{className:"h-[28px] text-xs text-[var(--text-content-color)] flex justify-start items-end",children:e.jsxs("span",{children:[r.balance(),"："]})}),h?e.jsx("div",{className:"h-[16px] w-[30px] mr-2 flex justify-center items-end pb-1",children:e.jsx("div",{className:"loader-3-dot scale-50"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xl mr-2",children:[" ",I(((l==null?void 0:l.money)||0).toFixed(6))]}),e.jsx("div",{className:"text-xs",children:l.currency})]})]})]})]}),e.jsx(T,{disabled:h,checked:l==null?void 0:l.checked,onChange:j=>c(l,j)})]},y)):e.jsx(P,{className:"grow min-h-[40vh]"})})}function de({historyList:n,selectedTime:c,selectedTrantype:h,selectedStatus:l,handleChangeTime:y,handleChangeType:j,handleChangeStatus:_,onHandleGoDetail:b}){var m,v,a;const C=ee(),p=[{name:r.all(),value:w.ALL_FUNDING},{name:r.deposit(),value:w.DEPOSIT},{name:r.withdraw_2(),value:w.WITHDRAW},{name:r.exchange_money(),value:w.EXCHANGE}],L=ae();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-3 grid grid-cols-3 gap-3 px-3",children:[e.jsx(S,{className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)] text-sm text-nowrap whitespace-nowrap overflow-hidden text-ellipsis",children:(m=p.find(t=>t.value==h))==null?void 0:m.name}),e.jsx(N,{color:"#4b4b52",name:"ic_arrow_down",className:"w-3 h-3 shrink-0"})]}),children:p.map((t,i)=>e.jsxs("div",{onClick:()=>j(t.value),className:"flex items-center justify-between px-4 py-2",children:[e.jsx("span",{className:`${t.value==h?"text-[var(--active)] font-semibold":""}`,children:t.name}),t.value==h&&e.jsx(N,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},i))}),e.jsx(S,{className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)] text-sm text-nowrap whitespace-nowrap overflow-hidden text-ellipsis",children:(v=C.find(t=>t.value==c))==null?void 0:v.name}),e.jsx(N,{color:"#4b4b52",name:"ic_arrow_down",className:"w-3 h-3"})]}),children:C.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",onClick:()=>y(t.value),children:[e.jsx("span",{className:`${t.value==c?"text-[var(--active)] font-semibold":""}`,children:t.name}),t.value==c&&e.jsx(N,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},i))}),e.jsx(S,{className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)] text-sm text-nowrap whitespace-nowrap overflow-hidden text-ellipsis ",children:(a=L.find(t=>t.value==l))==null?void 0:a.name}),e.jsx(N,{color:"#4b4b52",name:"ic_arrow_down",className:"w-3 h-3 shrink-0"})]}),children:L.map((t,i)=>e.jsxs("div",{onClick:()=>_(t.value),className:"flex items-center justify-between px-4 py-2",children:[e.jsx("span",{className:`${t.value==l?"text-[var(--active)] font-semibold":""}`,children:t.name}),t.value==l&&e.jsx(N,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},i))})]}),e.jsx("div",{className:"px-3 flex flex-col gap-3",children:n!=null&&n.length?n.map((t,i)=>t.bonusClassify==3||t.bonusClassify==4?e.jsx(le,{item:t},i):t.type==D.DEPOSIT?e.jsx(ce,{item:t},i):t.type==D.WITHDRAW?e.jsx(re,{item:t},i):(t.type=D.EXCHANGE)?e.jsx(ne,{item:t},i):e.jsx(ie,{item:t},i)):e.jsx(P,{className:"grow min-h-[40vh]"})})]})}export{de as HistoryList,xe as WalletTokenList,pe as WalletTokenView};
