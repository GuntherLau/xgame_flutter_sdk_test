import{r as c,aa as m,R as z,v as G,T as s,j as e,N as J,M as j,Z as i,aT as K,B as Q,c as v,cV as X,cW as ee}from"./index-BRyeyo8a.js";function se(){var _,f,w,D;const[y,C]=c.useState(""),[d,R]=c.useState(null),[x,M]=c.useState(m(new Date).format("YYYY-MM-DD")),[Y,h]=c.useState(!1),[L,b]=c.useState(!1),[n,T]=c.useState(null),{extInfo:l,userInfo:o}=z(G),[p,k]=c.useState([]),[A,B]=c.useState([]),[P,E]=c.useState([]),[V,H]=c.useState(0),g=[{value:null,name:s.all_record()},{value:0,name:s.general_agent()},{value:1,name:s.level_n_agent({__num:1})},{value:2,name:s.level_n_agent({__num:2})},{value:3,name:s.level_n_agent({__num:3})},{value:4,name:s.level_n_agent({__num:4})},{value:5,name:s.level_n_agent({__num:5})},{value:6,name:s.level_n_agent({__num:6})}],I=c.useMemo(()=>d?p.filter(t=>t.dlLevel==d):p,[p,d]),U=()=>{const t=((n==null?void 0:n.busDayReportDl)??[]).map(a=>({currency:a.currency,amount:a.liveBetReport.bettingMoney+a.ftBetReport.bettingMoney+a.cpBetReport.bettingMoney}));return i.convertToSystemCurrency(t)},q=()=>{const t=((n==null?void 0:n.rwReports)??[]).map(a=>({currency:a.currency,amount:a.firstRechargeAmount}));return i.convertToSystemCurrency(t)},F=()=>{const t=((n==null?void 0:n.rwReports)??[]).map(a=>({currency:a.currency,amount:a.rechMoney}));return i.convertToSystemCurrency(t)};function O(t){h(!1);const a=m(t).format("YYYY-MM-DD");a!==x&&M(a)}const W=t=>{const a=A.filter(r=>r.userId==t).map(r=>({currency:r.currency,amount:r.rechMoney}));return i.convertToSystemCurrency(a)},Z=t=>{const a=P.filter(r=>r.userId==t).map(r=>({currency:r.currency,amount:r.liveValidMoney}));return i.convertToSystemCurrency(a)},$=()=>{const t=new Date(x);t.setHours(23,59,59,999);const a=new Date(x);a.setHours(0,0,0,0),{userId:l.userId,beginDate:v(a),endDate:v(t),...d!==null&&{dlLevel:Number(o==null?void 0:o.dlLevel)+Number(d)}},X({userId:l.userId,beginDate:v(a),endDate:v(t),...d!==null&&{dlLevel:Number(o==null?void 0:o.dlLevel)+Number(d)}}).then(r=>T(r))},N=async()=>{var u,S;const t=new Date(x),a=new Date(x),r=await ee({account:y,beginDate:m(a).format("YYYY-MM-DD"),endDate:m(t).format("YYYY-MM-DD")});H(r.totalCount),B(((u=r.otherData)==null?void 0:u.rwReport)??[]),E(((S=r.otherData)==null?void 0:S.betReport)??[]),k(r.data)};return c.useEffect(()=>{l!=null&&l.userId&&N()},[x,l==null?void 0:l.userId]),c.useEffect(()=>{l!=null&&l.userId&&$()},[x,l==null?void 0:l.userId,d]),e.jsx(J,{title:s.subordinate_data(),className:"max-w-[800px] mx-auto",hideRightEl:!0,children:e.jsxs("div",{className:"py-3",children:[e.jsxs("div",{className:"px-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-full border border-[var(--agent-searchbox-border)] pl-3 pr-1 py-1 bg-[var(--agent-searchbox-bg)] gap-3",children:[e.jsx(j,{color:"#6d6d74",name:"ic_search",className:"h-5 w-5 min-w-5"}),e.jsx("input",{type:"text",value:y,onChange:t=>C(t.target.value),placeholder:s.enter_your_member_id(),className:"bg-transparent placeholder:text-[#57575c80] placeholder:text-xs outline-none grow"}),e.jsx("button",{onClick:N,className:"text-[#908f90] bg-[var(--agent-search-btn-bg)] px-3 py-1 rounded-full uppercase text-sm font-semibold",children:s.search()})]}),e.jsxs("div",{className:"flex gap-3 py-2.5",children:[e.jsxs("div",{onClick:()=>b(!0),className:"min-w-[150px] flex items-center justify-between gap-3 text-sm text-[var(--text-content-color)] px-3 bg-[var(--agent-searchbox-bg)] rounded-full py-2",children:[(_=g.find(t=>t.value==d))==null?void 0:_.name," ",e.jsx(j,{color:"#4b4b52",name:"ic_arrow_down",className:"w-2 h-2 "})]}),e.jsxs("div",{onClick:()=>h(!0),className:"min-w-[150px] flex items-center justify-between gap-3 text-sm text-[var(--text-content-color)] px-3 bg-[var(--agent-searchbox-bg)] rounded-full py-2",children:[x," ",e.jsx(j,{color:"#4b4b52",name:"ic_arrow_down",className:"w-2 h-2 "})]})]}),e.jsxs("div",{className:"mt-1 rounded-lg bg-[var(--box-bg)] text-sm text-[#8f8f96] px-2 text-support",children:[e.jsxs("div",{className:"flex py-3",children:[e.jsxs("div",{className:"w-1/2 px-3 relative",children:[e.jsx("div",{children:s.number_of_depositors()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[(n==null?void 0:n.rechargeUserCount)??0," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:s.people()})]}),e.jsx("div",{className:"h-full w-[1px] bg-[var(--box-separator)] absolute top-0 right-0"})]}),e.jsxs("div",{className:"w-1/2 px-3 pl-4",children:[e.jsx("div",{children:s.deposit_amount()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[F()," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:(f=i.defaultCurrency)==null?void 0:f.currency})]})]})]}),e.jsx("div",{className:"h-[1px] w-full bg-[var(--box-separator)]"}),e.jsxs("div",{className:"flex py-3",children:[e.jsxs("div",{className:" w-1/2 px-3 relative",children:[e.jsx("div",{children:s.number_of_bettors()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[n==null?void 0:n.userBetCount," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:s.people()})]}),e.jsx("div",{className:"h-full w-[1px] bg-[var(--box-separator)] absolute top-0 right-0"})]}),e.jsxs("div",{className:"w-1/2 px-3 pl-4",children:[e.jsx("div",{children:s.bet_amount()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[U()," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:(w=i.defaultCurrency)==null?void 0:w.currency})]})]})]}),e.jsx("div",{className:"h-[1px] w-full bg-[var(--box-separator)]"}),e.jsxs("div",{className:"flex py-3",children:[e.jsxs("div",{className:"w-1/2 px-3 relative",children:[e.jsx("div",{children:s.number_of_first_depositors()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[n==null?void 0:n.firstRechargeUserCount," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:s.people()})]}),e.jsx("div",{className:"h-full w-[1px] bg-[var(--box-separator)] absolute top-0 right-0"})]}),e.jsxs("div",{className:"w-1/2 px-3 pl-4",children:[e.jsx("div",{children:s.first_deposit_amount()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[q()," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:(D=i.defaultCurrency)==null?void 0:D.currency})]})]})]})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl",style:{background:"linear-gradient(to bottom, var(--box-bg), transparent 40%)"},children:[e.jsxs("div",{className:"flex text-xs text-[#55545c] border-b border-b-[var(--box-separator)] py-2",children:[e.jsx("span",{className:"w-1/4 text-center",children:s.tiers()}),e.jsx("span",{className:"w-1/4 text-center",children:s.account()}),e.jsx("span",{className:"w-1/4 text-center",children:s.deposit_amount()}),e.jsx("span",{className:"w-1/4 text-center",children:s.bet_amount()})]}),I.map((t,a)=>{var r,u;return e.jsxs("div",{className:"flex text-sm text-[var(--text-content-color)] border-b border-b-[var(--box-separator)] py-3 text-support",children:[e.jsx("span",{className:"w-1/4 text-center",children:t.dlLevel-((o==null?void 0:o.dlLevel)??0)==0?s.general_agent():s.level_n({__n__:t.dlLevel-((o==null?void 0:o.dlLevel)??0)})}),e.jsx("span",{className:"w-1/4 text-center",children:t.account}),e.jsxs("span",{className:"w-1/4 text-center",children:[W(t.userId)," ",e.jsx("span",{className:"text-xs",children:(r=i.defaultCurrency)==null?void 0:r.currency})]}),e.jsxs("span",{className:"w-1/4 text-center",children:[Z(t.userId)," ",e.jsx("span",{className:"text-xs",children:(u=i.defaultCurrency)==null?void 0:u.currency})]})]},a)}),V>p.length&&e.jsx("div",{className:"text-center py-6 text-sm text-[#e1e2e230]",children:s.show_all()})]}),e.jsx(K,{isOpen:Y,initialDate:m(x).toDate(),onCancel:()=>h(!1),onConfirm:O,maxDate:new Date}),e.jsx(Q,{onClose:()=>{b(!1)},open:L,title:s.select_agent_level(),children:g.map((t,a)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center px-2 py-2 text-sm border-b border-b-[var(--bottomsheet-separator)]",onClick:()=>{R(t.value),b(!1)},children:e.jsx("span",{className:`${t.value==d?"text-[var(--active)] font-semibold":""}`,children:t.name})},t.name)}))})]})})}export{se as SubordinateData};
