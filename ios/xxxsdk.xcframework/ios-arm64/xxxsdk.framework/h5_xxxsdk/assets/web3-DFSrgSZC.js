import{j as e,B as I,T as a,C as k,H as p,M as j,u as D,m as $,S as R,R as E,n as q,r as l,o as L,f as M,P as U,p as B,N as H,q as V,t as A,v as F,w as P,x as z,L as G,y as J,z as K}from"./index-BRyeyo8a.js";import{b as X}from"./browser-CeceZ__e.js";function Y({open:s,onClose:c,anchor:x,chains:m,onChange:r}){const d=t=>{r(t),c()};return e.jsx(I,{onClose:c,open:s,title:a.recharge_network(),children:m.map((t,n)=>e.jsxs("div",{onClick:()=>d(t),children:[e.jsxs("div",{className:"rounded p-4 flex gap-3 items-center",children:[e.jsx(k,{src:p.getChainIcon(t.bcToken.chainId),alt:"",className:"h-10"}),e.jsx("span",{className:"text-lg",children:t.bcToken.network}),e.jsx("span",{className:"grow"}),e.jsx(j,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]}),e.jsx("div",{className:"separator !bg-[var(--bottomsheet-separator)]"})]},`chain_${n}`))})}function Z({isOpen:s,onClose:c,tokens:x,onSelected:m}){return e.jsx(I,{open:s,onClose:c,title:a.currency_selection(),className:"!bg-[#2b2b31] !p-0 !rounded-t-xl",children:e.jsx("ul",{children:x.map((r,d)=>e.jsxs("li",{onClick:()=>{m(r),c&&c()},className:"flex items-center my-7 px-4",children:[e.jsx(k,{src:p.getChainIcon(r.chainId),alt:"",className:"w-9 aspect-square"}),e.jsx("div",{className:"mx-3 w-full",children:e.jsxs("div",{className:"text-sm",children:[r.tokenSymbol," (",r.network,")"]})}),e.jsx(j,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-4 aspect-square"})]},d))})})}function W({symbol:s}){return e.jsxs("div",{className:"flex items-center gap-2.5",children:[s?e.jsx(k,{src:p.getCurrencyIcon(s),alt:"",className:"w-8 h-8 circle"}):e.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-[var(--menu-bg)] rounded-full",children:e.jsx("div",{className:"loader-dot"})}),e.jsxs("span",{children:[s," ",a.deposit()]}),e.jsx(j,{color:"var(--arrow-color)",name:"ic_arrow_down",className:"w-2.5 h-2.5"})]})}function ne({showModal:s=!1}){const c=D(),{appSetting:x,updateSetting:m}=$(),r=new R(c.search),d=E(q),[t,n]=l.useState(),[y,v]=l.useState(!1),h=L();if(l.useEffect(()=>{if(h.length==0)return;const f=r.findNumber("configId",-1),b=h.find(u=>u.bcToken.id==f);if(!b){p.navigate(M.home);return}const w=d.find(u=>u.chainId==b.bcToken.chainId&&u.tokenSymbol==b.bcToken.tokenSymbol);n(w)},[d,h]),s)return e.jsx(U,{container:()=>document.body,children:e.jsx(B,{open:x.showCryptoDepositModal,onClose:()=>m("showCryptoDepositModal",!1),title:(t==null?void 0:t.tokenSymbol)+a.deposit(),className:"!bg-[var(--page-mob-bg)] !p-0 rounded-lg !w-[800px]",children:e.jsx(T,{wallet:t})})});const N=()=>{v(!0)};return e.jsx(H,{title:a.deposit(),className:"bg-[var(--page-mob-bg)]",titleEl:e.jsx("div",{onClick:N,children:e.jsx(W,{symbol:(t==null?void 0:t.tokenSymbol)??"",onChange:()=>{}})}),children:e.jsxs("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full pb-3 grow flex flex-col",children:[e.jsx(T,{wallet:t}),e.jsx(Z,{isOpen:y,onSelected:f=>n(f),onClose:()=>v(!1),tokens:d})]})})}function T({wallet:s}){var C;const c=D(),x=new R(c.search),m=E(q),r=L(),d=V(),t=A(F),[n,y]=l.useState(s),[v,h]=l.useState(!1),[N,f]=l.useState(null),[b,w]=l.useState(""),u=l.useRef(!1);l.useEffect(()=>{if(y(s),s!=null){const o=r.find(i=>i.bcToken.chainId==s.chainId&&i.bcToken.tokenSymbol==s.tokenSymbol);o&&_(o)}},[s]),l.useEffect(()=>{if(r.length>1&&!u.current&&s){const o=r.filter(i=>i.bcToken.tokenSymbol==(s==null?void 0:s.tokenSymbol));(o==null?void 0:o.length)>1&&(u.current=!0,h(!0))}},[r,s]);const O=o=>{r.length<2||(f(N?null:o.currentTarget),h(!0))},Q=()=>{f(null),h(!1)},_=async o=>{x.setVal("configId",o.bcToken.id),p.navigate(`${M.web3Deposit}${x.toSearchQuery()}`,{replace:!0});const i=m.find(g=>g.tokenSymbol==o.bcToken.tokenSymbol&&g.chainId==o.bcToken.chainId);if(!i){if(!(await P({chainId:o.bcToken.chainId,chainName:o.bcToken.chainName,network:o.bcToken.network,tokenName:o.bcToken.tokenName,tokenSymbol:o.bcToken.tokenSymbol})).success){p.showError(a.crypto_not_available());return}const S=await z();S!=null&&t(S)}if(i){y(i),X.toDataURL(i.address,{errorCorrectionLevel:"Q"},(g,S)=>{w(S)});for(const g of m)g.tokenSymbol==i.tokenSymbol}};return s?e.jsxs("div",{className:"p-3 bg-[var(--page-mob-bg)]",children:[e.jsx(Y,{open:v,onClose:Q,anchor:N,chains:r.filter(o=>o.bcToken.tokenSymbol==s.tokenSymbol),onChange:_}),e.jsxs("div",{className:"flex items-center gap-3 py-2.5 px-3 bg-[var(--box-bg)] rounded-lg cursor-pointer",onClick:O,children:[e.jsx("span",{className:"text-[var(--text-label)] grow",children:a.network()}),e.jsx(k,{src:p.getChainIcon(n==null?void 0:n.chainId),alt:"",className:"w-8 h-8"}),e.jsx("span",{className:" ",children:n==null?void 0:n.network}),e.jsx(j,{color:"var(--text-content-color)",name:"ic_chevon_right",className:"w-3.5 h-3.5 pc:rotate-90"})]}),e.jsxs("div",{className:"py-2.5 px-3 bg-[var(--box-bg)] rounded-lg mt-3 pb-5",children:[e.jsx("div",{className:"text-[var(--text-label)]",children:a.receiving_cryptocurrency_address()}),e.jsxs("div",{className:"rounded-md p-2 text-md flex items-center justify-end bg-[var(--deposit-wallet-address-bg)] border border-[var(--deposit-wallet-address-border)] mt-1 input-login-register",children:[e.jsx("span",{className:"grow text-clip overflow-hidden text-lg text-nowrap whitespace-nowrap text-support",children:J((n==null?void 0:n.address)??"")}),e.jsx("span",{className:"rounded-md bg-[var(--deposit-address-copy-bg)] text-[10px] py-1 px-2 uppercase text-nowrap whitespace-nowrap cursor-pointer",onClick:()=>p.copy((n==null?void 0:n.address)??""),children:a.copy_address()})]}),b&&e.jsxs("div",{className:"flex flex-col items-center gap-3 p-3 py-5",children:[e.jsx(k,{src:b,alt:"",className:"w-[200px] rounded-lg"}),e.jsx("button",{onClick:()=>K(b,`xgame_${n==null?void 0:n.tokenSymbol}_${n==null?void 0:n.chainName}.png`),className:"bg-[var(--active)] rounded-full py-1.5 w-[220px] text-black",children:a.save_payment_QR_code()})]}),e.jsxs("div",{className:"bg-[var(--deposit-alert-bg)] px-3 py-2 rounded-lg flex items-center gap-2 text-[var(--deposit-alert-text)] text-xs",children:[e.jsx(j,{color:"#ffdd00",name:"ic_warn",className:"w-7 h-7"}),e.jsx("p",{children:a.crypto_deposit_warning({_cur:n==null?void 0:n.tokenSymbol,_net:n==null?void 0:n.network})})]}),e.jsxs("div",{className:"flex items-end justify-between mt-3 py-3 border-b border-b-[var(--deposit-separator)]",children:[e.jsx("span",{className:"text-[var(--text-label)] text-sm",children:a.exchange_rate()}),e.jsxs("span",{className:"font-semibold text-sm text-support",children:["1 ",s.tokenSymbol," â‰ˆ ",Math.round(s.exchangeRate*(1-s.exchangeInFluctuation)*1e4)/1e4," ",s.exchangeCurrency]})]}),e.jsxs("div",{className:"flex items-end justify-between mt-3 py-3 border-b border-b-[var(--deposit-separator)]",children:[e.jsx("span",{className:"text-[var(--text-label)] text-sm",children:a.estimated_arrival_time()}),e.jsxs("span",{className:"font-semibold text-sm text-support",children:["3 ",a.minutes()]})]}),e.jsxs("div",{className:"flex items-end justify-between mt-3 py-3 border-b border-b-[var(--deposit-separator)]",children:[e.jsx("span",{className:"text-[var(--text-label)] text-sm",children:a.min_deposit_amount()}),e.jsxs("span",{className:"font-semibold text-sm text-support",children:[((C=d.find(o=>o.tokenSymbol==s.tokenSymbol))==null?void 0:C.minDeposit)??""," ",s.tokenSymbol]})]})]})]}):e.jsx(G,{className:"grow h-full"})}export{ne as Web3DepositView};
