var v=Object.defineProperty;var L=(s,e,r)=>e in s?v(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var f=(s,e,r)=>L(s,typeof e!="symbol"?e+"":e,r);import{u as C,S as b,Q as g,r as y,l as w,G as x,cS as d,cT as B,H as i,j as a,cU as A,L as S,f as j}from"./index-BRyeyo8a.js";var o=(s=>(s.GO_BACK="go_back",s.STATUS_BAR_COLOR="status_bar_color",s))(o||{});const n=class n{constructor(){f(this,"listeners",{});window.addEventListener("message",({data:e})=>{const r=this.listeners[e.event];r&&r.forEach(t=>{t(e.params)})})}static getInstance(){return n.instance||(n.instance=new n),n.instance}sendToParent(e){window.parent.postMessage(e,"*")}on(e,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r)}off(e,r){const t=this.listeners[e];t&&(this.listeners[e]=t.filter(c=>c!==r))}remove(e){this.listeners[e]&&(this.listeners[e]=[])}};f(n,"instance");let m=n;const l=m.getInstance();function O(){const s=C(),e=new b(s.search),r=g(e.findString("iframe","")),t=g(e.findString("referer",""))||"/",c=e.findString("category",""),p=e.findString("liveCode",""),u=()=>{i.navigate(-1),requestAnimationFrame(()=>{window.location.pathname==j.embedGame&&u()})};return y.useEffect(()=>(l.on(o.GO_BACK,({gameId:h})=>{if(w.emit(x.checkMoney),c==d.future&&B.cg==p){console.log("referer",t),t.includes("promotions/")?u():i.navigate(t,{replace:!0});return}i.navigate(-1)}),l.on(o.STATUS_BAR_COLOR,h=>{i.setStatusBarColor(h)}),e.findString("category","")==d.future&&i.setStatusBarColor("#242429"),e.findString("category","")==d.hash&&i.setStatusBarColor("#1e1e22"),window.addEventListener("resize",()=>{w.emit(x.checkScreenHeight)}),()=>{l.remove(o.GO_BACK),l.remove(o.STATUS_BAR_COLOR)}),[]),i.isPC()?a.jsx(A,{title:"",className:"max-w-[800px] mx-auto",disableHeader:!0,footerClassName:"!hidden",children:a.jsx(a.Fragment,{children:r?a.jsx("iframe",{src:r,className:"w-full h-full max-h-[var(--client-height)] costumed-Iframe grow",allow:"fullscreen; clipboard-read; clipboard-write",frameBorder:"0",loading:"lazy",title:"Payment Iframe",children:"Error"}):a.jsx(S,{className:"grow"})})}):a.jsx("div",{className:"max-w-[800px] mx-auto h-full",children:r?a.jsx("iframe",{src:r,className:"w-full h-full max-h-[var(--client-height)] costumed-Iframe grow overflow-hidden",allow:"fullscreen; clipboard-read; clipboard-write",frameBorder:"0",loading:"lazy",title:"Payment Iframe",children:"Error"}):a.jsx(S,{className:"grow"})})}export{O as EmbedGameView};
