import{X as T,R as p,Y as D,r as m,Z as $,j as e,L as j,H as u,f as x,_ as S,$ as L,C as b,M as v,a0 as N,T as h,A as E,D as P,E as W,o as V,b as C,a1 as I,n as M,t as R,v as B,h as U,w as F,x as Q,a2 as z,N as A}from"./index-BRyeyo8a.js";import{g as K}from"./deposit-DeSSEGEb.js";function H(){const{withdrawWeb3Tokens:t}=T({}),c=p(D),[s,l]=m.useState(!1);m.useEffect(()=>{l(!0),$.fetchWithdrawalConfig(!0).then(()=>l(!1))},[]);const a=t.reduce((i,r)=>i.find(n=>n.currency==r.currency)?i:[...i,r],[]);return s&&a.length==0?e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)] flex-center grow",children:e.jsx(j,{className:"grow"})}):e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:a.map((i,r)=>e.jsx(O,{item:i,className:"mt-2",userExtMonies:c??[],onClick:()=>u.navigate(`${x.web3Withdrawal}?token=${i.tokenSymbol}`)},r))})}function O({item:t,onClick:c,className:s,userExtMonies:l}){var g;const[a]=m.useState(window.innerWidth<=390),i=p(S),r=p(L);let n=0;return t.tokenSymbol==i?n=r:n=((g=l.find(d=>d.currency==t.tokenSymbol))==null?void 0:g.money)||0,e.jsx("div",{className:"Web3WithdrawWalletItem hover:cursor-pointer relative rounded-lg px-3 py-3 bg-[var(--box-bg)] "+(s??""),onClick:c,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{src:u.getCurrencyIcon(t.currency),alt:"",className:`${a?"w-7 h-7":"w-9 h-9"}`}),e.jsxs("div",{className:`grow ${a?"pt-0.5":"pt-1"}`,children:[e.jsx("div",{className:`${a?"text-sm":""} font-bold items-center`,children:t.tokenSymbol}),e.jsxs("div",{children:[n," ",e.jsx("span",{className:"text-xs",children:t.tokenSymbol})]})]}),e.jsx(v,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function Y(){const{withdrawFiats:t}=T({}),c=t.filter(a=>a.configType==N.BANK),s=t.filter(a=>a.configType==N.CRYPTO_WALLET),l=t.filter(a=>a.configType==N.E_WALLET);return e.jsxs("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:[!!c.length&&e.jsx(q,{}),!!s.length&&e.jsx(X,{}),!!l.length&&e.jsx(Z,{})]})}function q(){return e.jsx("div",{className:"BankWithdrawalItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] mt-2",onClick:()=>u.navigate(`${x.bankWithdrawal}`),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{src:"/assets/icon/ic_bank.png",alt:"",className:"w-7 h-7"}),e.jsx("div",{className:"grow pt-0.5",children:e.jsx("div",{className:"text-sm font-bold items-center",children:h.bank_card_withdrawal()})}),e.jsx(v,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function X(){return e.jsx("div",{className:"CryptoWalletWithdrawalItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] mt-2",onClick:()=>u.navigate(`${x.cryptoWithdrawal}`),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{src:"/assets/icon/ic_crypto_wallet.png",alt:"",className:"w-7 h-7"}),e.jsx("div",{className:"grow pt-0.5",children:e.jsx("div",{className:"text-sm font-bold items-center",children:h.crypto_wallet_withdrawal()})}),e.jsx(v,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function Z(){return e.jsx("div",{className:"EWalletWithdrawalItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] mt-2",onClick:()=>u.navigate(`${x.eWalletWithdrawal}`),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{src:"/assets/icon/ic_third_party_wallet.png",alt:"",className:"w-7 h-7"}),e.jsx("div",{className:"grow pt-0.5",children:e.jsx("div",{className:"text-sm font-bold items-center",children:h.e_wallet_payment()})}),e.jsx(v,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function G(){const[t,c]=E(P),s=t.filter(r=>r.languages.includes(W.currentLang())),[l,a]=m.useState(!1),i=async()=>{a(!0);const r=W.currentLang(),g=(await K()).filter(d=>d.languages&&!d.languages.includes(r)||d.bankFlag==0&&d.transferEnabled!=1?!1:d.transferEnabled==1||d.onlinePayEnabled==1);c(g),a(!1)};return m.useEffect(()=>{i()},[]),l&&s.length==0?e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)] flex-center grow",children:e.jsx(j,{className:"grow"})}):e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:s.map(r=>e.jsx(J,{item:r,className:"mt-2"},r.id))})}function J({item:t,className:c=""}){const s=window.innerWidth<=390,l=()=>{if(t.rechargeDiscountTrigger==0)return"";if(t.rechargeDiscountMode==0)return`${h.receive_2()} ${t.rechargeDiscountValue}%`;if(t.rechargeDiscountMode==1)return`${h.receive_2()} ${t.rechargeDiscountValue} ${t.currency}`},a=()=>{if(t.bankFlag==1){u.navigate(`${x.bankDeposit}?payType=${t.code}`);return}u.navigate(`${x.pixDeposit}?payType=${t.code}`)};return e.jsxs("div",{className:"DepositPayTypeItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] "+(c??""),onClick:()=>a(),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.icon&&e.jsx(b,{src:u.getRemoteImgPath(t.icon),alt:"",className:`${s?"w-7 h-7":"w-9 h-9"}`}),e.jsx("div",{className:`grow ${s?"pt-0.5":"pt-1"}`,children:e.jsx("div",{className:`${s?"text-sm":""} font-bold items-center`,children:t.name})}),e.jsx("label",{className:s?"text-xs":"",children:l()}),e.jsx(v,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]}),t.recommended==1&&t.rechargeDiscountValue!==0&&e.jsx("div",{className:"absolute top-0 right-0 h-5 px-3 rounded-bl-lg rounded-tr-lg bg-[#ff0000] leading-none text-xs font-semibold flex-center",children:h.recommend()})]})}function ee(){const t=V(),[c,s]=m.useState(!1),{isLogin:l}=p(C),a=p(I),i=p(M),r=R(B),[n,g]=m.useState(!1);m.useEffect(()=>{g(!0),$.fetchDepositWeb3Tokens().then(()=>g(!1))},[]);const d=t.reduce((o,y)=>o.find(f=>f.bcToken.tokenSymbol==y.bcToken.tokenSymbol)?o:[...o,y],[]);if(d.length==0)return e.jsx(U,{className:"grow"});const w=async o=>{if(!l&&u.getPathName()==x.wallet&&a){u.navigate(x.login);return}if(!i.find(f=>f.chainId==o.bcToken.chainId&&f.tokenSymbol==o.bcToken.tokenSymbol)){if(s(!0),!(await F({chainId:o.bcToken.chainId,chainName:o.bcToken.chainName,network:o.bcToken.network,tokenName:o.bcToken.tokenName,tokenSymbol:o.bcToken.tokenSymbol})).success){u.showError(h.crypto_not_available()),s(!1);return}const k=await Q();k!=null&&r(k),s(!1)}u.navigate(`${x.web3Deposit}?configId=${o.bcToken.id}`)};return n&&d.length==0?e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)] flex-center grow",children:e.jsx(j,{className:"grow"})}):e.jsxs("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:[c&&e.jsx(j,{className:"grow absolute top-0 left-0 w-full z-10 pc:pl-[var(--side-menu-width)]"}),d.map(o=>(o==null?void 0:o.rechargeConfig)&&e.jsx(te,{item:o,isShowDiscount:!0,className:"mt-2",onClick:()=>w(o)},o.bcToken.id))]})}function te({item:t,isShowDiscount:c=!0,onClick:s,className:l}){var r;const a=window.innerWidth<=390,i=()=>{if(!t.rechargeConfig)return"";const n=t.rechargeConfig;switch(n.rechargeDiscountTrigger){case 1:case 2:return n.rechargeDiscountValue<=0?"":n.rechargeDiscountMode==0?`${h.receive_2()} ${n.rechargeDiscountValue}%`:n.rechargeDiscountMode==1?`${h.receive_2()} ${n.rechargeDiscountValue} ${t.payType.currency}`:"";default:return""}};return e.jsxs("div",{className:"Web3DepositWalletItem hover:cursor-pointer relative rounded-lg px-3 py-4 bg-[var(--box-bg)] "+(l??""),onClick:s,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.bcToken.icon&&e.jsx(b,{src:u.getRemoteImgPath(t.bcToken.icon),alt:"",className:`${a?"w-7 h-7":"w-9 h-9"}`}),e.jsx("div",{className:`grow ${a?"pt-0.5":"pt-1"}`,children:e.jsx("div",{className:`${a?"text-sm":""} font-bold items-center`,children:t.bcToken.tokenSymbol})}),c&&e.jsx("label",{className:a?"text-xs":"",children:i()}),e.jsx(v,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]}),(t==null?void 0:t.rechargeConfig)&&((r=t==null?void 0:t.rechargeConfig)==null?void 0:r.rechargeDiscountValue)!==0&&t.payType.recommended==1&&e.jsx("div",{className:"absolute top-0 right-0 h-5 px-3 rounded-bl-lg rounded-tr-lg bg-[#ff0000] leading-none text-xs font-semibold flex-center",children:h.recommend()})]})}function _(t,c=""){const[s,l]=z(),a=s.get(t)??c,i=(n,g)=>{Object.keys(n).forEach(d=>{s.set(d,n[d])}),l(s,g)};return[a,(n,g)=>{i({[t]:n},g)}]}function ne(){const[t,c]=_("type","deposit"),[s,l]=_("method","fiat"),a=t==="withdraw",i=t==="deposit",r=s==="crypto",n=s==="fiat",{isLogin:g}=p(C),d=p(I),w=async f=>{if(a!==f){if(!g&&d&&f){u.navigate(x.login);return}c(f?"withdraw":"deposit",{replace:!0})}},o=f=>l(f?"crypto":"fiat",{replace:!0});function y(){return e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{onClick:()=>w(!1),className:`hover:cursor-pointer px-3 py-1 rounded-lg bg-[var(--header-btn-bg)] text-lg ${i?"font-bold text-[var(--header-active-btn-text)]":"text-[var(--header-btn-text)]"}`,children:h.deposit().toUpperCase()}),e.jsx("div",{onClick:()=>w(!0),className:`hover:cursor-pointer px-3 py-1 rounded-lg bg-[var(--header-btn-bg)] text-lg ${a?"font-bold text-[var(--header-active-btn-text)]":"text-[var(--header-btn-text)]"}`,children:h.withdraw_2().toUpperCase()})]})}return e.jsx(A,{titleEl:y(),className:"max-w-[800px] mx-auto bg-[var(--page-mob-bg)]",onBack:()=>u.navigateBack(),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-3 mt-3 flex items-center rounded-full font-semibold bg-[var(--box-bg)]",children:[e.jsx("span",{onClick:()=>o(!1),className:`grow capitalize py-1.5 text-center ${n?"bg-[var(--active)] text-black rounded-full":"text-[var(--text-content-color)]"}`,children:h.fiat_currency()}),e.jsx("span",{onClick:()=>o(!0),className:`grow capitalize py-1.5 text-center ${r?"bg-[var(--active)] text-black rounded-full":"text-[var(--text-content-color)]"}`,children:h.cryptocurrency()})]}),e.jsx(ae,{isWeb3:r,isWithdraw:a})]})})}function ae({isWithdraw:t,isWeb3:c}){return t?c?e.jsx(H,{}):e.jsx(Y,{}):c?e.jsx(ee,{}):e.jsx(G,{})}export{ne as WalletView};
