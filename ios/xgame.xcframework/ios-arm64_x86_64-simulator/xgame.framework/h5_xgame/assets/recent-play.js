import{a as D,S as q,u as B,r as h,T as c,L as w,j as s,H as v,l as Q,R as Y,M as j}from"./index.sdk-0.0.1.js";import{S as J}from"./tabs.js";import{N as K}from"./normal-layout.js";import{useHorizontalGameMenu as W,getAllGameCategories as X}from"./home-layout.js";import{a as r}from"./game.dto.js";import{u as Z}from"./mqtt-controller.js";import{F as C,C as R,O as G,S as E}from"./grid-game-view.js";import{S as $}from"./modals.js";import"./main-layout.js";import"./popover.js";import"./Modal.js";import"./lazy-load-component.js";import"./browser.js";import"./game-widget.js";import"./current-not-support-modal.js";function ue(){const L=D(),I=new q(L.search),{i18n:{language:y}}=B(),[S,N]=h.useState(!1),[t,P]=h.useState(I.findNumber("tab",0)),n=W().map(l=>({value:l.type,name:l.type==r.ALL?c.all():l.name})),{getGameByCate:_,games:O,getGames:V,getProviders:A,getGameLivePair:F}=Z(),o=h.useMemo(()=>{var g;const l=((g=w.getInstance().getLang(y))==null?void 0:g.verticalCategories)??[],i=[];for(const a of l){const e=X({showChat:!1}).find(f=>f.type==a);e&&i.push({...e,games:_(e.code,{recent:!0})})}const d=[];i.map(a=>{d.push(a.code)});const p=(i||[]).slice();return d.map(a=>{var e,f;if((e=w.getInstance().getLang(y))!=null&&e[a]){const U=(f=w.getInstance().getLang(y))==null?void 0:f[a];let T=0;const m=p.find((u,x)=>u.code===a?(T=x,!0):!1);if(m){const u=(m==null?void 0:m.games.slice())||[];let x=[];U.map(H=>{m==null||m.games.slice().map((b,ee)=>{if(b.gameId===H){const z=u.indexOf(b);u.splice(z,1),x.push(b)}})}),x=[...x,...u],p[T].games=x}}}),p},[O,L.search,y,S]),M=()=>{var i,d,p,g,a;const l=((i=o.find(e=>e.type==n[t].value))==null?void 0:i.games)??[];return o.every(e=>e.games.length==0)||t>0&&l.length==0?s.jsxs("div",{className:"flex-center flex-col pt-32",children:[s.jsx(Q,{src:"/assets/img/no_record.png",className:"w-[100px] ml-5",alt:""}),s.jsx("div",{className:"pt-6 text-[var(--text-not-found)] font-light text-sm",children:c.no_record_found()}),s.jsx("button",{onClick:()=>v.navigate(Y.home,{replace:!0}),className:"w-4/5 bg-[var(--active)] rounded-md py-2 text-black uppercase text-xl font-semibold mt-12",children:c.game_lobby()})]}):t==0?o.map((e,f)=>e.games.length==0?s.jsx(h.Fragment,{},e.type):(e.expandClass,e.code=="future"?s.jsxs("div",{className:"py-3",children:[s.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[s.jsx(j,{name:e.icon,color:"var(--cate-icon-color)",className:"h-4 min-w-4 !max-w-6 mr-1"}),s.jsx("h2",{className:"font-bold text-[17px] text-[var(--cate-color)] uppercase",children:e.name})]}),s.jsx(C,{games:e.games})]},e.code):e.code=="live"?s.jsxs("div",{className:"py-3",children:[s.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[s.jsx(j,{name:e.icon,color:"var(--cate-icon-color)",className:"h-4 min-w-4 !max-w-6 mr-1"}),s.jsx("h2",{className:"font-bold text-[17px] text-[var(--cate-color)] uppercase",children:e.name})]}),s.jsx(R,{games:e.games})]},e.code):e.code=="lottery"?s.jsxs("div",{className:"py-3",children:[s.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[s.jsx(j,{name:e.icon,color:"var(--cate-icon-color)",className:"h-4 min-w-4 !max-w-6 mr-1"}),s.jsx("h2",{className:"font-bold text-[17px] text-[var(--cate-color)] uppercase",children:e.name})]}),s.jsx(G,{games:e.games,type:r.LOTTERY})]},e.code):e.code=="sport"?s.jsxs("div",{className:"py-3",children:[s.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[s.jsx(j,{name:e.icon,color:"var(--cate-icon-color)",className:"h-4 min-w-4 !max-w-6 mr-1"}),s.jsx("h2",{className:"font-bold text-[17px] text-[var(--cate-color)] uppercase",children:e.name})]}),s.jsx(E,{games:e.games})]},e.code):s.jsxs("div",{className:"py-3",children:[s.jsxs("div",{className:"flex items-center gap-x-1 mb-2",children:[s.jsx(j,{name:e.icon,color:"var(--cate-icon-color)",className:"h-4 min-w-4 !max-w-6 mr-1"}),s.jsx("h2",{className:"font-bold text-[17px] text-[var(--cate-color)] uppercase",children:e.name})]}),s.jsx(G,{games:e.games,type:e.type})]},e.code))):n[t].value==r.FUTURE?s.jsx(C,{games:((d=o.find(e=>e.type==r.FUTURE))==null?void 0:d.games)??[]}):n[t].value==r.LIVE?s.jsx(R,{games:((p=o.find(e=>e.type==r.LIVE))==null?void 0:p.games)??[]}):n[t].value==r.SPORTS?s.jsx(E,{games:((g=o.find(e=>e.type==r.SPORTS))==null?void 0:g.games)??[]}):s.jsx(G,{games:((a=o.find(e=>e.type==n[t].value))==null?void 0:a.games)??[],type:n[t].value})},k=()=>{v.getRecentPlayGameIds().length!=0&&(v.clearRecentPlayGame(),v.showToast(c.clear_successfully()),N(!1))};return h.useEffect(()=>{V(),A(),F()},[]),s.jsx(K,{title:c.recent_play(),className:"max-w-[800px] mx-auto",tabEl:s.jsx(J,{onChange:P,selected:t,tabs:n,className:"px-2 bg-[var(--box-bg)] sticky top-0"}),rightEl:s.jsx("div",{className:"text-[var(--arrow-color)] font-light text-sm",onClick:()=>N(v.getRecentPlayGameIds().length>0),children:c.cancel_all()}),children:s.jsxs("div",{className:"p-3 pt-2",children:[s.jsx(M,{}),s.jsx($,{content:c.clear_everything(),onClose:()=>N(!1),onConfirm:k,open:S})]})})}export{ue as RecentPlayGames};
