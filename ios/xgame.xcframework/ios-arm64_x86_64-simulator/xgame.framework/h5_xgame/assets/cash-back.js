import{r as c,ao as L,H as E,j as s,T as n,l as I,a8 as _,M as p,Y as M,am as H}from"./index.sdk-0.0.1.js";import{N as F}from"./normal-layout.js";import{A as R}from"./button.js";import{C as T}from"./modals.js";import{useHorizontalGameMenu as V}from"./home-layout.js";import"./main-layout.js";import"./popover.js";import"./Modal.js";import"./lazy-load-component.js";import"./mqtt-controller.js";import"./browser.js";import"./game.dto.js";function G(){var j;const[t,x]=c.useState(!1),[o,B]=c.useState([]),[f,k]=c.useState(0),[C,h]=c.useState(!0),r=V();c.useEffect(()=>{b()},[]);const b=async()=>{var i,l,g,v,N,y,w;h(!0);try{const e=await L({rows:1,page:1});let d=0;if(e&&(e!=null&&e.success)&&((l=(i=e==null?void 0:e.data)==null?void 0:i.data)==null?void 0:l.length)>=0){let u=[];(r==null?void 0:r.length)>0?(g=e==null?void 0:e.data)==null||g.data.map(m=>{const a=r.find(A=>A.type==m.gameType);a&&u.push({...m,icon:a==null?void 0:a.icon,name:a==null?void 0:a.name})}):u=(v=e==null?void 0:e.data)==null?void 0:v.data,B(u),((y=(N=e==null?void 0:e.data)==null?void 0:N.data)==null?void 0:y.length)===0?d=0:(w=e==null?void 0:e.data)==null||w.data.map(m=>{d+=m.bonusAmount||0})}k(d)}catch{E.showError("error")}finally{h(!1)}},S=async()=>{(await H({})).success&&b()};return s.jsx(F,{title:n.my_betting_bonus(),className:"max-w-[800px] mx-auto ",hideRightEl:!0,children:s.jsxs("div",{className:" p-3  overflow-hidden overflow-y-auto hide-scrollbar h-full pb-3",children:[s.jsxs("div",{className:"bg-[var(--box-bg)] rounded-md p-3 pb-5 flex flex-col items-center justify-center",children:[s.jsx(I,{src:"/assets/img/casino_chip.png",className:"w-[90px] mt-7"}),s.jsx("div",{className:"text-3xl font-semibold mt-3",children:f.toFixed(2)}),s.jsx("div",{className:"text-[#8f8f90] text-sm",children:(j=_.defaultCurrency)==null?void 0:j.currency}),s.jsx("div",{className:"text-[#a3a3a3] mt-3",children:n.rebate_amount()}),s.jsx(R,{disable:!(f>0),onClick:()=>S(),title:n.click_to_collect(),className:"uppercase mt-5 mb-2"}),s.jsxs("div",{className:"flex items-center text-[#606062] text-xs pt-5 gap-2",onClick:()=>x(!0),children:[n.cash_back_instruction(),s.jsx("span",{className:" rounded-[50%] bg-[#3d3d44]",children:s.jsx(p,{color:"#7c7d7e",name:"ic_question",className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"py-3",children:[s.jsx("div",{className:"h-[30px] flex justify-between items-center",children:s.jsxs("div",{className:"flex h-full",children:[s.jsx("span",{className:"pl-4 pr-3 h-full flex items-end font-semibold text-[var(--vip-tab-text)] bg-[var(--vip-tab-bg)] rounded-tl-2xl",children:n.betting_bonus()}),s.jsx(p,{color:"var(--vip-tab-bg)",name:"ic_tab",className:"w-[28px] h-[30px] ml-[-1px]"})]})}),C?s.jsx(M,{className:"grow h-full mt-[10vh]"}):s.jsx("div",{className:"flex flex-col py-3 pt-6 gap-2 mt-[-1px] ",style:{background:"linear-gradient(to bottom, var(--vip-tab-bg), transparent 15%)"},children:o.map((i,l)=>s.jsx("div",{children:s.jsx(q,{data:i,keyIndex:l})},l))})]}),s.jsx(T,{open:t,onClose:()=>x(!1),title:n.cash_back_instruction(),className:"!m-w-[200px] !w-[80%] text-black !top-[30%] !translate-y-0 !translate-x-[-50%] flex flex-col justify-center",children:s.jsx(s.Fragment,{children:s.jsx("div",{className:"relative px-5 pb-0 pt-3 flex flex-col items-center justify-center gap-1",children:n.cash_back_info_content()})})})]})})}function q({data:t,keyIndex:x}){var o;return s.jsxs("div",{className:"rounded bg-[var(--box-bg)] px-4 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex justify-start items-center align-baseline",children:[s.jsx("div",{className:"w-10 h-10 mr-4",children:s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx(p,{name:(t==null?void 0:t.icon)||"ic_tab",color:"var(--active)",className:"h-[70%] w-auto"})})}),s.jsx("span",{className:"font-bold",children:t==null?void 0:t.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"mr-1 text-lg ",children:(t==null?void 0:t.bonusAmount)||0}),s.jsx("span",{className:"text-xs",children:(o=_.defaultCurrency)==null?void 0:o.currency})]})]})}export{G as CashBackView};
