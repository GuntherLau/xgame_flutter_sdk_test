import{h as q,c as I,i as X}from"./swiper-react.js";function Y(c){const{effect:t,swiper:e,on:i,setTranslate:d,setTransition:n,overwriteParams:f,perspective:w,recreateShadows:o,getEffectParams:h}=c;i("beforeInit",()=>{if(e.params.effect!==t)return;e.classNames.push(`${e.params.containerModifierClass}${t}`),w&&w()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const s=f?f():{};Object.assign(e.params,s),Object.assign(e.originalParams,s)}),i("setTranslate",()=>{e.params.effect===t&&d()}),i("setTransition",(s,p)=>{e.params.effect===t&&n(p)}),i("transitionEnd",()=>{if(e.params.effect===t&&o){if(!h||!h().slideShadows)return;e.slides.forEach(s=>{s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),o()}});let r;i("virtualUpdate",()=>{e.params.effect===t&&(e.slides.length||(r=!0),requestAnimationFrame(()=>{r&&e.slides&&e.slides.length&&(d(),r=!1)}))})}function D(c,t){const e=q(t);return e!==t&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function z(c,t,e){const i=`swiper-slide-shadow${e?`-${e}`:""}${` swiper-slide-shadow-${c}`}`,d=q(t);let n=d.querySelector(`.${i.split(" ").join(".")}`);return n||(n=I("div",i.split(" ")),d.append(n)),n}function R(c){let{swiper:t,extendParams:e,on:i}=c;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Y({effect:"coverflow",swiper:t,on:i,setTranslate:()=>{const{width:f,height:w,slides:o,slidesSizesGrid:h}=t,r=t.params.coverflowEffect,s=t.isHorizontal(),p=t.translate,C=s?-p+f/2:-p+w/2,x=s?r.rotate:-r.rotate,A=r.depth,P=X(t);for(let u=0,j=o.length;u<j;u+=1){const l=o[u],y=h[u],k=l.swiperSlideOffset,O=(C-k-y/2)/y,a=typeof r.modifier=="function"?r.modifier(O):O*r.modifier;let E=s?x*a:0,S=s?0:x*a,$=-A*Math.abs(a),m=r.stretch;typeof m=="string"&&m.indexOf("%")!==-1&&(m=parseFloat(r.stretch)/100*y);let v=s?0:m*a,M=s?m*a:0,T=1-(1-r.scale)*Math.abs(a);Math.abs(M)<.001&&(M=0),Math.abs(v)<.001&&(v=0),Math.abs($)<.001&&($=0),Math.abs(E)<.001&&(E=0),Math.abs(S)<.001&&(S=0),Math.abs(T)<.001&&(T=0);const F=`translate3d(${M}px,${v}px,${$}px)  rotateX(${P(S)}deg) rotateY(${P(E)}deg) scale(${T})`,H=D(r,l);if(H.style.transform=F,l.style.zIndex=-Math.abs(Math.round(a))+1,r.slideShadows){let g=s?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),b=s?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");g||(g=z("coverflow",l,s?"left":"top")),b||(b=z("coverflow",l,s?"right":"bottom")),g&&(g.style.opacity=a>0?a:0),b&&(b.style.opacity=-a>0?-a:0)}}},setTransition:f=>{t.slides.map(o=>q(o)).forEach(o=>{o.style.transitionDuration=`${f}ms`,o.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${f}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}export{R as E};
