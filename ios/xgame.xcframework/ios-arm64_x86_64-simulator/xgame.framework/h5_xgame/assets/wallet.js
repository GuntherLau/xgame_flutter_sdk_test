import{H as s,a as A,b as P,P as H,z as Y,h as L,r as x,Q as K,a6 as V,a7 as O,a8 as I,R as o,j as e,Y as D,T as i,a9 as C,W as Q,p as q,l as v,M as w}from"./index.sdk-0.0.1.js";import{N as G}from"./normal-layout.js";import{N as S}from"./no-record.js";import{c as J}from"./deposit.js";import"./main-layout.js";import"./popover.js";import"./Modal.js";import"./lazy-load-component.js";function ue(){const t=s.currentLang(),n=A(),d=P(H),p=Y(L),[a,c]=x.useState(n.search.includes("withdraw")),[l,y]=x.useState(!0),[u,j]=x.useState(!0),[k,h]=x.useState(!1),W=K(),{withdrawWeb3Tokens:M}=V({}),[R,B]=x.useState([]),{isLogin:T}=P(O),[m,$]=x.useState(!n.search.includes("fiat")),F=async()=>{y(!0),await I.fetchWithdrawalConfig(),n.search.includes("fiat")?await N(!1):await N(!0),y(!1)};x.useEffect(()=>{I.fetchDepositWeb3Tokens(),n.search.includes("withdraw")&&c(!0),F()},[]),x.useEffect(()=>{n.search.includes("withdraw")?c(!0):c(!1),n.search.includes("crypto")?$(!0):$(!1)},[n]),x.useEffect(()=>{a&&s.getPathName()==o.wallet?s.navigate(o.wallet+`?type=withdraw&method=${m?"crypto":"fiat"}`):N(m)},[a]);const U=async r=>{if(!T&&s.getPathName()==o.wallet){s.navigate(o.login);return}if(!d.find(f=>f.chainId==r.bcToken.chainId&&f.tokenSymbol==r.bcToken.tokenSymbol)){if(h(!0),!(await Q({chainId:r.bcToken.chainId,chainName:r.bcToken.chainName,network:r.bcToken.network,tokenName:r.bcToken.tokenName,tokenSymbol:r.bcToken.tokenSymbol})).success){s.showError(i.crypto_not_available()),h(!1);return}const b=await q();b!=null&&p(b),h(!1)}s.navigate(`${o.web3Deposit}?configId=${r.bcToken.id}`)},N=async(r=!0,_=!1)=>{if(r==m&&_)return;if(!T&&!r&&s.getPathName()==o.wallet){s.navigate(o.login);return}j(!0),_&&$(r),!a&&r&&I.fetchDepositWeb3Tokens();let f=[];if(!a&&!r){f=await J();const b=[];f!=null&&f.length&&f.map(g=>{g!=null&&g.languages&&t&&(g!=null&&g.languages.includes(t))?b.push(g):g!=null&&g.languages||b.push(g)}),B(b.filter(g=>g.bankFlag!=0))}s.getPathName()==o.wallet&&s.navigate(o.wallet+`?type=${a?"withdraw":"deposit"}&method=${r?"crypto":"fiat"}`),j(!1)},E=async r=>{if(a!=r){if(!T&&r){s.navigate(o.login);return}c(r)}};function z(){return e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{onClick:()=>E(!1),className:`hover:cursor-pointer px-3 py-1 rounded-lg bg-[var(--header-btn-bg)] text-lg ${a?"text-[var(--header-btn-text)]":"font-bold text-[var(--header-active-btn-text)]"}`,children:i.deposit().toUpperCase()}),e.jsx("div",{onClick:()=>E(!0),className:`hover:cursor-pointer px-3 py-1 rounded-lg bg-[var(--header-btn-bg)] text-lg ${a?"font-bold text-[var(--header-active-btn-text)]":"text-[var(--header-btn-text)]"}`,children:i.withdraw_2().toUpperCase()})]})}return e.jsx(G,{titleEl:z(),className:"max-w-[800px] mx-auto bg-[var(--page-mob-bg)]",onBack:()=>s.navigateBack(),children:e.jsxs(e.Fragment,{children:[k&&e.jsx(D,{className:"grow absolute top-0 left-0 w-full z-10 pc:pl-[var(--side-menu-width)]"}),l?e.jsx(D,{className:"grow"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-3 mt-3 flex items-center rounded-full font-semibold bg-[var(--box-bg)]",children:[e.jsx("span",{onClick:()=>N(!0,!0),className:`grow capitalize py-1.5 text-center ${m?"bg-[var(--active)] text-black rounded-full":"text-[var(--text-content-color)]"}`,children:i.cryptocurrency()}),e.jsx("span",{onClick:()=>N(!1,!0),className:`grow capitalize py-1.5 text-center ${m?"text-[var(--text-content-color)]":"bg-[var(--active)] text-black rounded-full"}`,children:i.fiat_currency()})]}),u?e.jsx(D,{className:"grow"}):e.jsx(re,{isWithdrawal:a,isCrypto:m,depositCryptoTokens:W,depositPayTypes:R,withdrawalCryptoTokens:M,handleSelectCryptoDeposit:U})]})]})})}function X({item:t,isShowDiscount:n=!0,onClick:d,className:p}){const a=window.innerWidth<=390,c=()=>{if(!t.rechargeConfig)return"";const l=t.rechargeConfig;switch(l.rechargeDiscountTrigger){case 1:case 2:return l.rechargeDiscountValue<=0?"":l.rechargeDiscountMode==0?`${i.receive_2()} ${l.rechargeDiscountValue}%`:l.rechargeDiscountMode==1?`${i.receive_2()} ${l.rechargeDiscountValue} ${t.payType.currency}`:"";default:return""}};return e.jsxs("div",{className:"Web3DepositWalletItem hover:cursor-pointer relative rounded-lg px-3 py-4 bg-[var(--box-bg)] "+(p??""),onClick:d,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.bcToken.icon&&e.jsx(v,{src:s.getRemoteImgPath(t.bcToken.icon),alt:"",className:`${a?"w-7 h-7":"w-9 h-9"}`}),e.jsx("div",{className:`grow ${a?"pt-0.5":"pt-1"}`,children:e.jsxs("div",{className:`${a?"text-sm":""} font-bold items-center`,children:[t.bcToken.tokenSymbol," ",e.jsxs("span",{className:`${t.bcToken.network?"":"hidden"} text-[var(--text-content-color)] text-sm font-normal`,children:[" (",t.bcToken.network,")"]})]})}),n&&e.jsx("label",{className:a?"text-xs":"",children:c()}),e.jsx(w,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]}),t.rechargeConfig.rechargeDiscountValue!==0&&t.payType.recommended==1&&e.jsx("div",{className:"absolute top-0 right-0 h-5 px-3 rounded-bl-lg rounded-tr-lg bg-[#ff0000] leading-none text-xs font-semibold flex-center",children:i.recommend()})]})}function Z({item:t,onClick:n,className:d,userExtMonies:p}){const[a]=x.useState(window.innerWidth<=390),c=p.find(l=>l.currency==t.tokenSymbol);return e.jsx("div",{className:"Web3WithdrawWalletItem hover:cursor-pointer relative rounded-lg px-3 py-3 bg-[var(--box-bg)] "+(d??""),onClick:n,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{src:s.getCurrencyIcon(t.currency),alt:"",className:`${a?"w-7 h-7":"w-9 h-9"}`}),e.jsxs("div",{className:`grow ${a?"pt-0.5":"pt-1"}`,children:[e.jsxs("div",{className:`${a?"text-sm":""} font-bold items-center`,children:[t.tokenSymbol," ",e.jsxs("span",{className:`${t.network?"":"hidden"} text-[var(--text-content-color)] text-sm font-normal`,children:[" (",t.network,")"]})]}),c&&e.jsxs("div",{children:[c==null?void 0:c.money," ",e.jsx("span",{className:"text-xs",children:c==null?void 0:c.currency})]})]}),e.jsx(w,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function ee({item:t,className:n=""}){const d=window.innerWidth<=390,p=()=>{if(t.rechargeDiscountTrigger==0)return"";if(t.rechargeDiscountMode==0)return`${i.receive_2()} ${t.rechargeDiscountValue}%`;if(t.rechargeDiscountMode==1)return`${i.receive_2()} ${t.rechargeDiscountValue} ${t.currency}`},a=()=>{if(t.bankFlag==1){s.navigate(`${o.bankDeposit}?payType=${t.code}`);return}s.navigate(`${o.pixDeposit}?payType=${t.code}`)};return e.jsxs("div",{className:"DepositPayTypeItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] "+(n??""),onClick:()=>a(),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.icon&&e.jsx(v,{src:s.getRemoteImgPath(t.icon),alt:"",className:`${d?"w-7 h-7":"w-9 h-9"}`}),e.jsx("div",{className:`grow ${d?"pt-0.5":"pt-1"}`,children:e.jsx("div",{className:`${d?"text-sm":""} font-bold items-center`,children:t.name})}),e.jsx("label",{className:d?"text-xs":"",children:p()}),e.jsx(w,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]}),t.recommended==1&&t.rechargeDiscountValue!==0&&e.jsx("div",{className:"absolute top-0 right-0 h-5 px-3 rounded-bl-lg rounded-tr-lg bg-[#ff0000] leading-none text-xs font-semibold flex-center",children:i.recommend()})]})}function te(){return e.jsx("div",{className:"BankWithdrawalItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] mt-2",onClick:()=>s.navigate(`${o.bankWithdrawal}`,{replace:!0}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{src:"/assets/icon/ic_bank.png",alt:"",className:"w-7 h-7"}),e.jsx("div",{className:"grow pt-0.5",children:e.jsx("div",{className:"text-sm font-bold items-center",children:i.bank_card_withdrawal()})}),e.jsx(w,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function ae(){return e.jsx("div",{className:"CryptoWalletWithdrawalItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] mt-2",onClick:()=>s.navigate(`${o.cryptoWithdrawal}`,{replace:!0}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{src:"/assets/icon/ic_crypto_wallet.png",alt:"",className:"w-7 h-7"}),e.jsx("div",{className:"grow pt-0.5",children:e.jsx("div",{className:"text-sm font-bold items-center",children:i.crypto_wallet_withdrawal()})}),e.jsx(w,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function se(){return e.jsx("div",{className:"EWalletWithdrawalItem relative rounded-lg px-3 py-4 bg-[var(--box-bg)] mt-2",onClick:()=>s.navigate(`${o.eWalletWithdrawal}`,{replace:!0}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{src:"/assets/icon/ic_third_party_wallet.png",alt:"",className:"w-7 h-7"}),e.jsx("div",{className:"grow pt-0.5",children:e.jsx("div",{className:"text-sm font-bold items-center",children:i.e_wallet_payment()})}),e.jsx(w,{name:"ic_chevon_right",color:"var(--text-content-color)",className:"w-3 h-3"})]})})}function re({depositCryptoTokens:t,depositPayTypes:n,isCrypto:d,isWithdrawal:p,withdrawalCryptoTokens:a,handleSelectCryptoDeposit:c}){const{withdrawFiats:l}=V({}),{userExtMonies:y}=P(L);if(p){if(d)return a.length==0?e.jsx(S,{className:"grow"}):e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:a.map((h,W)=>e.jsx(Z,{item:h,className:"mt-2",userExtMonies:y??[],onClick:()=>s.navigate(`${o.web3Withdrawal}?token=${h.tokenSymbol}&chainId=${h.chainId}`,{replace:!0})},W))});const u=l.filter(h=>h.configType==C.BANK),j=l.filter(h=>h.configType==C.CRYPTO_WALLET),k=l.filter(h=>h.configType==C.E_WALLET);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:[!!u.length&&e.jsx(te,{}),!!j.length&&e.jsx(ae,{}),!!k.length&&e.jsx(se,{})]})})}return d?t.length==0?e.jsx(S,{className:"grow"}):e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:t.map(u=>e.jsx(X,{item:u,isShowDiscount:!0,className:"mt-2",onClick:()=>c(u)},u.bcToken.id))}):n.length==0?e.jsx(S,{className:"grow"}):e.jsx("div",{className:"overflow-hidden overflow-y-auto hide-scrollbar h-full p-3 pt-1 bg-[var(--page-mob-bg)]",children:n.map(u=>e.jsx(ee,{item:u,className:"mt-2"},u.id))})}export{ue as WalletView};
