import{a as X,r as d,z as A,h as Z,b as J,a7 as K,ac as W,ai as M,j as e,T as i,l as o,H as m,aj as C,R as b,S as T,M as u,ah as k,ak as ee,p as se}from"./index.sdk-0.0.1.js";import{N as ae}from"./normal-layout.js";/* empty css             */import{N as P}from"./no-record.js";import{b as te,C as $}from"./popover.js";import{g as re}from"./common.js";import{T as D,g as le,a as ce,F as O}from"./common2.js";import{u as ne,C as ie}from"./main-layout.js";import{g as oe,B as xe,D as de,W as me,C as he}from"./funding-item.js";import"./Modal.js";import"./lazy-load-component.js";import"./home-layout.js";import"./mqtt-controller.js";import"./browser.js";import"./game.dto.js";const E={ALL:-1,ACCEPTING:1,PROCESSING:2,ACCEPTED:3,FAILED:4},fe={WALLET:"wallet",HISTORY:"history"};function Fe(){var H;const l=X(),[t,r]=d.useState(fe.WALLET),[h,_]=d.useState([]),[p,I]=d.useState(1),[j,w]=d.useState(D.ALL),[x,g]=d.useState(E.ALL),[y,f]=d.useState(!1),N=A(Z),{defaultWallet:s,allWalletsHasMoney:L}=ne(),{isLogin:z}=J(K),U=A(W),q=()=>{try{f(!0),k().then(a=>{U(a),f(!1)})}catch{f(!1)}},F=a=>{m.navigate(b.walletToken+`?type=${a}`,{replace:!0}),r(a)},R=async(a,c)=>{if(!a||a.checked){m.showInfoToast(i.off_main_wallet_hint());return}const n={currency:a.tokenSymbol||a.currency};await ee(n);const v=await se();v!=null&&N(v)};d.useEffect(()=>{l.search.includes("history")&&r("history")},[l]),d.useEffect(()=>{G()},[x,j,p]);const G=async()=>{try{const a=new Date;a.setHours(23,59,59,999);const c=new Date(a);c.setDate(a.getDate()-p+1),c.setHours(0,0,0,0);const n={page:1,rows:50,dateFromIso:M(c),dateToIso:M(a),transferType:j};x!=E.ALL&&(x==E.FAILED?n.statusList="4,5,6":n.status=x);const v=await oe(n);_(v.data)}catch(a){console.log(a)}},B=a=>{m.navigate(`${b.fundingDetail}?orderNo=${a.orderNo}&type=${a.type}&bonusClassify=${a.bonusClassify}`)},Y=a=>{I(a)},Q=a=>{w(a)},V=a=>{g(a)},S=(a,c,n)=>{if(n&&!z){m.navigate(b.login);return}setTimeout(()=>{m.navigate(a,c)},0)};return e.jsx(ae,{title:i.wallet(),className:"agent-bg",headerClasses:"agent-header",contentClassName:"!bg-transparent",hideRightEl:!0,children:e.jsxs("div",{className:"py-3",children:[e.jsxs("div",{className:"flex justify-start items-center px-3 ",children:[e.jsx("span",{className:"mr-2 text-[#f3ffc9] capitalize",children:`${i.current_wallet()}:`}),e.jsxs("span",{className:"text-[#f3ffc9]",children:[s==null?void 0:s.currency," ",s!=null&&s.currencyName?`(${s.currencyName})`:""]})]}),e.jsxs("div",{className:"flex items-center justify-start mt-3 px-3 ",children:[e.jsx(o,{src:m.getCurrencyIcon(s==null?void 0:s.currency),className:"w-11 h-11 circle",alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-between ml-3 h-full",children:[e.jsxs("div",{className:"flex text-left items-end",children:[e.jsx("span",{className:"text-2xl !leading-5 mr-2",children:Number(s==null?void 0:s.money)>0?C(((s==null?void 0:s.money)||0).toFixed(6)):"0.00"}),e.jsx("span",{className:"text-base leading-4",children:(s==null?void 0:s.currency)||"-"}),e.jsx(te,{actionELClassName:"ml-1",alignCenter:!0,className:"!bg-white max-h-[400px] !min-w-[280px] overflow-y-scroll overflow-x-hidden hide-scrollbar",actionEL:e.jsx("div",{className:"px-2",children:e.jsx(o,{src:"/assets/icon/arrow-down-wbg.png",className:"w-4 h-4 circle",alt:""})}),children:L.map((a,c)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full flex justify-between items-center bg-white bg-transparent px-3 py-3 rounded-md",onClick:()=>{R(a)},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{src:m.getCurrencyIcon(a==null?void 0:a.currency),className:"w-8 h-8 circle",alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-between ml-2 h-full",children:[e.jsx("span",{className:"text-sm text-black",children:a==null?void 0:a.currencyName}),e.jsxs("div",{className:"flex text-left items-end",children:[e.jsxs("span",{className:"text-sm text-black",children:[i.balance(),"："]}),e.jsxs("span",{className:"text-sm text-black mr-1",children:[" ",C(((a==null?void 0:a.money)||0).toFixed(6))]}),e.jsx("span",{className:"text-sm text-black",children:a==null?void 0:a.currency})]})]})]}),(a==null?void 0:a.currency)===(s==null?void 0:s.currency)&&e.jsx(o,{src:"/assets/icon/checked-green-bg-icon.png",className:"w-5 h-5 circle",alt:""})]},c),e.jsx("div",{className:"h-[1px] bg-[#f2f2f2]"})]}))}),e.jsx("div",{className:"rounded-md flex items-center ml-1",onClick:()=>{q()},children:e.jsx("svg",{className:`h-5 w-5 arrow  ${y?"rotate-animation":""}`,color:"var(--chip-text)","data-markup":"balance_viewer_arrow",children:e.jsx("use",{xlinkHref:"/assets/svg/icons.svg#ic_reload"})})})]}),e.jsx("div",{children:e.jsxs("span",{className:"text-sm",children:["≈",(s==null?void 0:s.balanceInSystemCurrency)&&C((H=(s==null?void 0:s.balanceInSystemCurrency)||0)==null?void 0:H.toFixed(6)),e.jsx("span",{className:"text-xs ml-1",children:s==null?void 0:s.exchangeCurrency})]})})]})]}),e.jsxs("div",{className:"flex justify-around items-center mt-10",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",onClick:()=>S(b.wallet+"?type=deposit&method=crypto",void 0,!1),children:[e.jsx(o,{src:"/assets/icon/wallet-icon.png",className:"w-11 h-auto circle",alt:""}),e.jsx("span",{className:"mt-1 capitalize",children:i.deposit()})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",onClick:()=>S("/wallet?type=withdraw&method=crypto",void 0,!0),children:[e.jsx(o,{src:"/assets/icon/credit-icon.png",className:"w-11 h-auto circle",alt:""}),e.jsx("span",{className:"mt-1 capitalize",children:i.withdraw_2()})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",onClick:()=>{const c=new T(l.search).findString("exchangeTo","");let n="";(c==null?void 0:c.length)>0&&(n=`?exchangeTo=${c}`),S(b.exchangeMoney+n,void 0,!0)},children:[e.jsx(o,{src:"/assets/icon/exchange-icon.png",className:"w-11 h-auto circle",alt:""}),e.jsx("span",{className:"mt-1 capitalize",children:i.exchange_money()})]})]}),e.jsxs("div",{className:"w-full h-[40px] min-h-[40px] max-h-[40px] overflow-hidden overflow-x-auto hide-scrollbar flex items-center  rounded-t-xl mt-7 bg-[#1a1a1d] font-bold",children:[e.jsxs("div",{className:"flex flex-1 rounded-t-xl h-full w-full cursor-pointer",onClick:()=>F("wallet"),children:[e.jsx("div",{className:"h-full w-[20px] tabs-right flex",children:e.jsx("div",{className:`h-full w-full rounded-tl-xl ${t=="wallet"?" bg-gradient-to-b from-[#29292e] to-[#222227]":""}`})}),e.jsxs("div",{className:`relative h-full w-full flex justify-center items-center font-semibold py-4 px-3 whitespace-nowrap ${t=="wallet"?"bg-gradient-to-b from-[#242427] to-[#222227] text-[#ffffff] border-b-[3px] border-b-[#c5fb0d]":"text-[var(--text-content-color)] pr-6 border-b-2 border-b-transparent"}`,children:[t=="wallet"&&e.jsx(o,{src:"/assets/icon/light-bar-dot.png",className:"w-23 h-auto circle mx-auto absolute bottom-[-1px]",alt:""}),e.jsx("span",{className:"",children:i.my_currency()})]}),t=="wallet"?e.jsxs("div",{className:`h-full ${t=="wallet"?"w-[30px]":" w-[15px]"} tabs-right flex`,children:[e.jsx("div",{className:`h-full w-1/2 ${t=="wallet"?"tabs-right_left":""} `}),e.jsx("div",{className:`h-full w-1/2 ${t=="wallet"?"tabs-right_right bg-gradient-to-b from-[#29292e] to-[#222227]":""} `})]}):e.jsxs("div",{className:`h-full opacity-0 ${t=="wallet"?"w-[30px]":" w-[15px]"} tabs-right flex`,children:[e.jsx("div",{className:`h-full w-1/2 ${t=="wallet"?"tabs-right_left":""} `}),e.jsx("div",{className:`h-full w-1/2 ${t=="wallet"?"tabs-right_right bg-gradient-to-b from-[#29292e] to-[#222227]":""} `})]})]}),e.jsxs("div",{className:"flex flex-1 rounded-t-xl h-full w-full cursor-pointer",onClick:()=>F("history"),children:[t=="history"?e.jsxs("div",{className:"h-full w-[30px] tabs-left flex",children:[e.jsx("div",{className:`h-full w-1/2 ${t=="history"?"tabs-left_left bg-gradient-to-b from-[#29292e] to-[#222227]":""} `}),e.jsx("div",{className:`h-full w-1/2 ${t=="history"?"tabs-left_right":""} `})]}):e.jsxs("div",{className:"h-full w-[30px] tabs-left flex opacity-0",children:[e.jsx("div",{className:`h-full w-1/2 ${t=="history"?"tabs-left_left bg-gradient-to-b from-[#29292e] to-[#222227]":""} `}),e.jsx("div",{className:`h-full w-1/2 ${t=="history"?"tabs-left_right":""} `})]}),e.jsxs("div",{className:`relative h-full w-full flex justify-center items-center font-semibold py-4 px-3 whitespace-nowrap ${t=="history"?"bg-gradient-to-b from-[#242427] to-[#222227] text-[#ffffff] border-b-[3px] border-b-[#c5fb0d]":"text-[var(--text-content-color)] px-6 border-b-2 border-b-transparent"}`,children:[t=="history"&&e.jsx(o,{src:"/assets/icon/light-bar-dot.png",className:"w-23 h-auto circle mx-auto absolute bottom-[-1px]",alt:""}),i.transaction_history()]}),t=="history"?e.jsx("div",{className:"h-full w-[15px] tabs-right flex bg-gradient-to-b from-[#29292e] to-[#222227] rounded-tr-xl"}):e.jsx("div",{className:"h-full w-[15px] tabs-right flex bg-gradient-to-b from-[#29292e] to-[#222227] opacity-0 rounded-tr-xl"})]})]}),e.jsxs("div",{className:"w-full pt-1",children:[t=="wallet"&&e.jsx(ue,{walletTokenList:L,onChangeWallets:R}),t=="history"&&e.jsx(pe,{historyList:h,selectedTime:p,selectedTrantype:j,selectedStatus:x,handleChangeTime:Y,handleChangeType:Q,handleChangeStatus:V,onHandleGoDetail:B})]})]})})}function ue({walletTokenList:l,onChangeWallets:t}){return e.jsx("div",{className:"flex flex-col items-center justify-between mx-3 pb-10",children:l!=null&&l.length?l.map(r=>e.jsxs("div",{className:"w-full mt-2 flex justify-between bg-[#242427] px-3 py-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{src:m.getCurrencyIcon(r==null?void 0:r.currency),className:"w-11 h-11 circle",alt:""}),e.jsxs("div",{className:"flex flex-col items-start justify-between ml-3 h-full",children:[e.jsxs("span",{className:"text-base",children:[r.currency," ",r.currencyName?`(${r.currencyName})`:""]}),e.jsxs("div",{className:"flex items-baseline text-end",children:[e.jsxs("span",{className:"text-xs text-[var(--text-content-color)]",children:[i.balance(),"："]}),e.jsxs("span",{className:"text-xl mr-2",children:[" ",C(((r==null?void 0:r.money)||0).toFixed(6))]}),e.jsx("span",{className:"text-xs",children:r.currency})]})]})]}),e.jsx(ie,{checked:r==null?void 0:r.checked,onChange:h=>t(r,h)})]},r.currency)):e.jsx(P,{className:"grow min-h-[40vh]"})})}function pe({historyList:l,selectedTime:t,selectedTrantype:r,selectedStatus:h,handleChangeTime:_,handleChangeType:p,handleChangeStatus:I,onHandleGoDetail:j}){var y,f,N;const w=re(),x=le().filter(s=>s.value!=D.COMMISSION&&s.value!=D.BONUS),g=ce();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-3 flex gap-3 px-3",children:[e.jsx($,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)] text-sm text-nowrap whitespace-nowrap overflow-hidden text-ellipsis",children:(y=x.find(s=>s.value==r))==null?void 0:y.name}),e.jsx(u,{color:"#4b4b52",name:"ic_arrow_down",className:"w-3 h-3 shrink-0"})]}),children:x.map(s=>e.jsxs("div",{onClick:()=>p(s.value),className:"flex items-center justify-between px-4 py-2",children:[e.jsx("span",{className:`${s.value==r?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.value==r&&e.jsx(u,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))}),e.jsx($,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)] text-sm text-nowrap whitespace-nowrap overflow-hidden text-ellipsis",children:(f=w.find(s=>s.value==t))==null?void 0:f.name}),e.jsx(u,{color:"#4b4b52",name:"ic_arrow_down",className:"w-3 h-3"})]}),children:w.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",onClick:()=>_(s.value),children:[e.jsx("span",{className:`${s.value==t?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.value==t&&e.jsx(u,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))}),e.jsx($,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)] text-sm text-nowrap whitespace-nowrap overflow-hidden text-ellipsis ",children:(N=g.find(s=>s.value==h))==null?void 0:N.name}),e.jsx(u,{color:"#4b4b52",name:"ic_arrow_down",className:"w-3 h-3 shrink-0"})]}),children:g.map(s=>e.jsxs("div",{onClick:()=>I(s.value),className:"flex items-center justify-between px-4 py-2",children:[e.jsx("span",{className:`${s.value==h?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.value==h&&e.jsx(u,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))})]}),e.jsx("div",{className:"px-3 flex flex-col gap-3",children:l!=null&&l.length?l.map(s=>s.bonusClassify==3||s.bonusClassify==4?e.jsx(xe,{item:s},s.id):s.type==O.DEPOSIT?e.jsx(de,{item:s},s.id):s.type==O.WITHDRAW?e.jsx(me,{item:s},s.id):e.jsx(he,{item:s},s.id)):e.jsx(P,{className:"grow min-h-[40vh]"})})]})}export{pe as HistoryList,ue as WalletTokenList,Fe as WalletTokenView};
