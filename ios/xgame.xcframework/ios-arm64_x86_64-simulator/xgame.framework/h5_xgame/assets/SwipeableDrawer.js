import{r as f,O as at,j as Y,y as dt,N as ot}from"./index.sdk-0.0.1.js";import{i as A,g as W,D as ht}from"./Drawer.js";import{s as gt,r as mt,m as wt,b as yt,c as St,u as Tt,j as bt,o as xt,h as K,p as C,q as F}from"./Modal.js";function Pt(e){const{children:n,defer:s=!1,fallback:i=null}=e,[u,y]=f.useState(!1);return at(()=>{s||y(!0)},[s]),f.useEffect(()=>{s&&y(!0)},[s]),Y.jsx(f.Fragment,{children:u?n:i})}const Rt=gt("div",{shouldForwardProp:mt})(wt(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),Dt=f.forwardRef(function(n,s){const{anchor:i,classes:u={},className:y,width:o,style:x,...P}=n,D=n;return Y.jsx(Rt,{className:yt("PrivateSwipeArea-root",u.root,u[`anchor${St(i)}`],y),ref:s,style:{[A(i)?"width":"height"]:o,...x},ownerState:D,...P})}),B=3,Q=20;let b=null;function Z(e,n,s){return e==="right"?s.body.offsetWidth-n[0].pageX:n[0].pageX}function v(e,n,s){return e==="bottom"?s.innerHeight-n[0].clientY:n[0].clientY}function L(e,n){return e?n.clientWidth:n.clientHeight}function st(e,n,s,i){return Math.min(Math.max(s?n-e:i+n-e,0),i)}function Mt(e,n){const s=[];for(;e&&e!==n.parentElement;){const i=F(n).getComputedStyle(e);i.getPropertyValue("position")==="absolute"||i.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&s.push(e),e=e.parentElement}return s}function Ht({domTreeShapes:e,start:n,current:s,anchor:i}){const u={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(y=>{let o=s>=n;(i==="top"||i==="left")&&(o=!o);const x=i==="left"||i==="right"?"x":"y",P=Math.round(y[u.scrollPosition[x]]),D=P>0,M=P+y[u.clientLength[x]]<y[u.scrollLength[x]];return!!(o&&M||!o&&D)})}const At=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Xt=f.forwardRef(function(n,s){const i=Tt({name:"MuiSwipeableDrawer",props:n}),u=bt(),y={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{anchor:o="left",disableBackdropTransition:x=!1,disableDiscovery:P=!1,disableSwipeToOpen:D=At,hideBackdrop:M,hysteresis:tt=.52,allowSwipeInChildren:k=!1,minFlingVelocity:I=450,ModalProps:{BackdropProps:ct,...it}={},onClose:rt,onOpen:ut,open:c=!1,PaperProps:O={},SwipeAreaProps:lt,swipeAreaWidth:V=20,transitionDuration:_=y,variant:R="temporary",...ft}=i,[et,$]=f.useState(!1),t=f.useRef({isSwiping:null}),G=f.useRef(),q=f.useRef(),p=f.useRef(),pt=dt(O.ref,p),X=f.useRef(!1),U=f.useRef();at(()=>{U.current=null},[c]);const N=f.useCallback((r,m={})=>{const{mode:a=null,changeTransition:l=!0}=m,d=W(u,o),h=["right","bottom"].includes(d)?1:-1,S=A(o),w=S?`translate(${h*r}px, 0)`:`translate(0, ${h*r}px)`,H=p.current.style;H.webkitTransform=w,H.transform=w;let g="";if(a&&(g=u.transitions.create("all",xt({easing:void 0,style:void 0,timeout:_},{mode:a}))),l&&(H.webkitTransition=g,H.transition=g),!x&&!M){const T=q.current.style;T.opacity=1-r/L(S,p.current),l&&(T.webkitTransition=g,T.transition=g)}},[o,x,M,u,_]),j=K(r=>{if(!X.current)return;if(b=null,X.current=!1,ot.flushSync(()=>{$(!1)}),!t.current.isSwiping){t.current.isSwiping=null;return}t.current.isSwiping=null;const m=W(u,o),a=A(o);let l;a?l=Z(m,r.changedTouches,C(r.currentTarget)):l=v(m,r.changedTouches,F(r.currentTarget));const d=a?t.current.startX:t.current.startY,h=L(a,p.current),S=st(l,d,c,h),w=S/h;if(Math.abs(t.current.velocity)>I&&(U.current=Math.abs((h-S)/t.current.velocity)*1e3),c){t.current.velocity>I||w>tt?rt():N(0,{mode:"exit"});return}t.current.velocity<-I||1-w>tt?ut():N(L(a,p.current),{mode:"enter"})}),nt=(r=!1)=>{if(!et){(r||!(P&&k))&&ot.flushSync(()=>{$(!0)});const m=A(o);!c&&p.current&&N(L(m,p.current)+(P?15:-Q),{changeTransition:!1}),t.current.velocity=0,t.current.lastTime=null,t.current.lastTranslate=null,t.current.paperHit=!1,X.current=!0}},E=K(r=>{if(!p.current||!X.current||b!==null&&b!==t.current)return;nt(!0);const m=W(u,o),a=A(o),l=Z(m,r.touches,C(r.currentTarget)),d=v(m,r.touches,F(r.currentTarget));if(c&&p.current.contains(r.target)&&b===null){const g=Mt(r.target,p.current);if(Ht({domTreeShapes:g,start:a?t.current.startX:t.current.startY,current:a?l:d,anchor:o})){b=!0;return}b=t.current}if(t.current.isSwiping==null){const g=Math.abs(l-t.current.startX),T=Math.abs(d-t.current.startY),z=a?g>T&&g>B:T>g&&T>B;if(z&&r.cancelable&&r.preventDefault(),z===!0||(a?T>B:g>B)){if(t.current.isSwiping=z,!z){j(r);return}t.current.startX=l,t.current.startY=d,!P&&!c&&(a?t.current.startX-=Q:t.current.startY-=Q)}}if(!t.current.isSwiping)return;const h=L(a,p.current);let S=a?t.current.startX:t.current.startY;c&&!t.current.paperHit&&(S=Math.min(S,h));const w=st(a?l:d,S,c,h);if(c)if(t.current.paperHit)w===0&&(t.current.startX=l,t.current.startY=d);else if(a?l<h:d<h)t.current.paperHit=!0,t.current.startX=l,t.current.startY=d;else return;t.current.lastTranslate===null&&(t.current.lastTranslate=w,t.current.lastTime=performance.now()+1);const H=(w-t.current.lastTranslate)/(performance.now()-t.current.lastTime)*1e3;t.current.velocity=t.current.velocity*.4+H*.6,t.current.lastTranslate=w,t.current.lastTime=performance.now(),r.cancelable&&r.preventDefault(),N(w)}),J=K(r=>{var h;if(r.defaultPrevented||r.defaultMuiPrevented||c&&(M||!q.current.contains(r.target))&&!p.current.contains(r.target))return;const m=W(u,o),a=A(o),l=Z(m,r.touches,C(r.currentTarget)),d=v(m,r.touches,F(r.currentTarget));if(!c){if(D||!(r.target===G.current||(h=p.current)!=null&&h.contains(r.target)&&(typeof k=="function"?k(r,G.current,p.current):k)))return;if(a){if(l>V)return}else if(d>V)return}r.defaultMuiPrevented=!0,b=null,t.current.startX=l,t.current.startY=d,nt()});return f.useEffect(()=>{if(R==="temporary"){const r=C(p.current);return r.addEventListener("touchstart",J),r.addEventListener("touchmove",E,{passive:!c}),r.addEventListener("touchend",j),()=>{r.removeEventListener("touchstart",J),r.removeEventListener("touchmove",E,{passive:!c}),r.removeEventListener("touchend",j)}}},[R,c,J,E,j]),f.useEffect(()=>()=>{b===t.current&&(b=null)},[]),f.useEffect(()=>{c||$(!1)},[c]),Y.jsxs(f.Fragment,{children:[Y.jsx(ht,{open:R==="temporary"&&et?!0:c,variant:R,ModalProps:{BackdropProps:{...ct,ref:q},...R==="temporary"&&{keepMounted:!0},...it},hideBackdrop:M,PaperProps:{...O,style:{pointerEvents:R==="temporary"&&!c&&!k?"none":"",...O.style},ref:pt},anchor:o,transitionDuration:U.current||_,onClose:rt,ref:s,...ft}),!D&&R==="temporary"&&Y.jsx(Pt,{children:Y.jsx(Dt,{anchor:o,ref:G,width:V,...lt})})]})});export{Xt as S};
