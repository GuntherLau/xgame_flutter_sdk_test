import{j as e,H as N,T as t,a5 as V,M as p,$ as P,R as w,a as Y,S as q,r as n,Y as K,ai as A}from"./index.sdk-0.0.1.js";import{N as z}from"./normal-layout.js";import{C as J}from"./currency-selector.js";import{S as Q}from"./tabs.js";import{C as O}from"./popover.js";import{g as X}from"./common.js";import{N as Z}from"./no-record.js";import{a as r}from"./game.dto.js";import{B as u,S as h,W as j,g as ee}from"./bet-history.js";import"./main-layout.js";import"./lazy-load-component.js";import"./SwipeableDrawer.js";import"./Drawer.js";import"./Modal.js";import"./index7.js";function te({item:a}){const i=Number(a.winAmount)>0,m=()=>{switch(a.__status){case u.CANCLLED:return t.cancelled();case u.WIN:return t.win();case u.LOSE:return t.lose();case u.DRAW:return t.draw();default:return t.unsettlement()}},y=()=>{const c=P(JSON.stringify(a));N.navigate(`${w.brBetDetail}?key=${c}`)};return e.jsxs("div",{className:"rounded-md bg-[var(--box-bg)] p-3",onClick:y,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-[#a3a3a7]",children:[N.currentLang()=="zh"?a.chineseName:a.englishName," ",a.gameKind&&e.jsxs("span",{className:"font-thin",children:["(",a.gameKind,")"]})]}),e.jsxs("div",{className:"text-sm text-[#58585f]",children:[t.bet_amount(),": ",e.jsxs("span",{className:"text-[#c2c3ca] text-lg",children:[" ",a.betAmount," "]}),a.currency]})]}),e.jsxs("div",{className:"text-end",children:[[u.WIN,u.LOSE].includes(a.__status)&&e.jsxs("div",{className:"",children:[e.jsxs("span",{className:`text-xl font-semibold ${i?"text-[#adf100]":"text-[#ff2949]"}`,children:[i?"+":"",a.winAmount]}),e.jsxs("span",{className:"text-sm text-[#58585f]",children:[" ",a.currency]})]}),e.jsx("div",{className:"text-[#a3a3a7] font-bold text-sm",children:m()})]})]}),e.jsx("div",{className:"h-[1px] my-3 bg-[#2e2e33]"}),e.jsxs("div",{className:"flex items-center justify-between text-[#58585f] text-sm",children:[e.jsx("span",{children:V(new Date(a.betTime))}),e.jsx(p,{color:"#58585f",name:"ic_chevon_right",className:"w-3 h-3"})]})]})}function Ne(){var k,D;const a=Y(),i=new q(a.search),[m,y]=n.useState(i.findNumber("state",0)),[c,$]=n.useState(i.findNumber("time",1)),[l,B]=n.useState(i.findNumber("type",-1)),[v,S]=n.useState(!1),[T,E]=n.useState(!1),[x,L]=n.useState([]),[M,C]=n.useState(0),[W,F]=n.useState(!1),g=n.useRef(1),G=[t.all(),t.unsettlement(),t.win(),t.lose(),t.other().toLowerCase()],_=X(),U=n.useRef(null),I=[{type:-1,name:t.all()},{type:r.FUTURE,name:t.futures()},{type:r.HASH,name:t.hash()},{type:r.CRYPTO_GAME,name:t.crypto_game()},{type:r.NFT_GAME,name:t.nft_game()},{type:r.SLOTS,name:t.slots()},{type:r.FISHING,name:t.fishing()},{type:r.LIVE,name:t.live()},{type:r.CARD_GAME,name:t.card_games()},{type:r.SPORTS,name:t.sports()},{type:r.LOTTERY,name:t.lottery()}],R=async(s=!1)=>{var H;if(T)return;s?(E(!0),g.current+=1):(g.current=1,S(!0));const d=new Date;d.setHours(23,59,59,999);const b=new Date(d);b.setDate(d.getDate()-c+1),b.setHours(0,0,0,0);const o={betEndDateIso:A(d),betStartDateIso:A(b),page:g.current,rows:10};switch(m){case 1:o.settles=h.UNSETTLE;break;case 2:o.settles=h.SETTLE,o.winloseStatus=j.WIN;break;case 3:o.settles=h.SETTLE,o.winloseStatus=j.LOSE;break;case 4:o.settles=h.OTHER,o.winloseStatus=j.OTHER;break}l!=r.ALL&&(o.type=l);const f=await ee(o);(H=f.data)!=null&&H.data?(C(f.data.totalCount),L(s?[...x,...f.data.data]:f.data.data)):(L([]),C(0)),E(!1),S(!1)};return n.useEffect(()=>{R(),N.navigate(`${w.betHistory}?state=${m}&time=${c}&type=${l}`)},[c,l,m]),e.jsx(z,{title:t.betting_record(),className:"max-w-[800px] mx-auto",onBack:()=>N.navigate(w.home),enableMenu:!1,hideRightEl:!0,tabEl:e.jsx(Q,{onChange:y,selected:m,tabs:G,className:"px-2 sticky top-0"}),children:e.jsxs(e.Fragment,{children:[v&&e.jsx(K,{className:"grow"}),!v&&e.jsxs("div",{ref:U,className:"flex flex-col overflow-hidden overflow-y-auto hide-scrollbar h-full grow",children:[e.jsxs("div",{className:"p-3 flex gap-3",children:[e.jsx(O,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)]",children:(k=_.find(s=>s.value==c))==null?void 0:k.name}),e.jsx(p,{color:"var(--text-content-color)",name:"ic_arrow_down",className:"w-3 h-3"})]}),children:_.map(s=>e.jsxs("div",{onClick:()=>{$(s.value)},className:"flex items-center justify-between px-4 py-2",children:[e.jsx("span",{className:`${s.value==c?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.value==c&&e.jsx(p,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))}),e.jsx(O,{actionELClassName:"w-1/2",className:"anchor-arrow-top-right",actionEL:e.jsxs("button",{className:"rounded-full px-3 py-1 border border-[var(--box-separator)] w-full flex items-center justify-between",style:{backgroundImage:"var(--selector-bg)"},children:[e.jsx("span",{className:"text-[var(--text-content-color)]",children:(D=I.find(s=>s.type==l))==null?void 0:D.name}),e.jsx(p,{color:"var(--text-content-color)",name:"ic_arrow_down",className:"w-3 h-3"})]}),children:I.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 min-",onClick:()=>{B(s.type)},children:[e.jsx("span",{className:`${s.type==l?"text-[var(--active)] font-semibold":""}`,children:s.name}),s.type==l&&e.jsx(p,{color:"var(--active)",name:"ic_tick",className:"w-5 h-5"})]},s.name))})]}),x.length==0&&e.jsx(Z,{className:"grow"}),x.length>0&&e.jsxs("div",{className:"p-3 pt-0 flex flex-col gap-2",children:[x.map((s,d)=>e.jsx(te,{item:s},"bet_item_"+d.toString())),x.length<M&&e.jsx("div",{className:"flex justify-center mt-3",children:T?e.jsx("div",{className:"loader2 self-center w-6"}):e.jsx("div",{onClick:()=>R(!0),className:"text-sm text-[#444547] text-center",children:t.show_more()})})]}),e.jsx(J,{onChange:()=>{},onClose:()=>F(!1),open:W})]})]})})}export{Ne as BetHistoryView};
