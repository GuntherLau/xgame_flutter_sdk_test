import{r as c,j as e,M as b,T as k,H as j,R as F,u as z,a as D,S as q,b as B,L as Q}from"./index.sdk-0.0.1.js";import{L as V,C as Z,P as J,G as y,a as K}from"./game-widget.js";import{u as S,a as O,m as X}from"./mqtt-controller.js";import{P as Y,C as ee}from"./current-not-support-modal.js";import{getAllGameCategories as ae}from"./home-layout.js";import"./game.dto.js";import"./browser.js";import"./modals.js";import"./Modal.js";import"./main-layout.js";import"./popover.js";import"./lazy-load-component.js";const v=8;function N({children:s,headerProps:i,className:o="",contentClassName:d="",expandClassName:m="",onClickAll:n}){const[r,g]=c.useState(!1),l=c.useRef(null),[p,u]=c.useState(Math.min(v,s.length)),G=()=>{u(r?Math.min(v,s.length):Math.min(s.length,v*3)),g(!r)},f=()=>{l.current&&l.current.scrollTo({left:l.current.scrollLeft-l.current.clientWidth,behavior:"smooth"})},P=()=>{l.current&&(u(Math.min(p+v,s.length)),l.current.scrollTo({left:l.current.scrollLeft+l.current.clientWidth,behavior:"smooth"}))},h=()=>{l.current&&l.current.scrollLeft+l.current.clientWidth+100>l.current.scrollWidth&&u(Math.min(p+v,s.length))},L=()=>s.slice(0,p);return c.useEffect(()=>{p>v||u(Math.min(v,s.length))},[s]),e.jsxs("div",{className:`w-full py-3 ${o}`,children:[e.jsx(se,{...i,onClickAll:n??G,onClickNext:P,onClickPrev:f}),e.jsx("div",{ref:l,onScroll:h,className:`w-full gap-2 overflow-x-auto overflow-y-hidden hide-scrollbar ${r?m:d||"flex items-center"}`,children:L().map(w=>({...w,props:{...w.props,isExpand:r}}))})]})}function se({icon:s,title:i,control:o=!0,onClickAll:d,onClickNext:m,onClickPrev:n}){return e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(b,{name:s,color:"var(--cate-icon-color)",className:"h-4 min-w-4 !max-w-6 mr-1"}),e.jsx("h2",{className:"font-bold text-[17px] text-[var(--cate-color)] uppercase",children:i})]}),o&&e.jsxs("div",{className:"flex items-center justify-end gap-x-2 text-sm flex-1",children:[e.jsx("button",{className:"bg-[var(--swiper-btn-bg)] text-[var(--swiper-btn-text)] rounded min-w-[32px] px-2 h-[24px] flex items-center justify-center capitalize",onClick:d,children:k.all()}),e.jsx("button",{className:"bg-[var(--swiper-btn-bg)] rounded w-[32px] h-[24px] flex items-center justify-center",onClick:n,children:e.jsx(b,{name:"ic_chevon_right",color:"var(--swiper-btn-text)",className:"h-3 w-3 rotate-180"})}),e.jsx("button",{className:"bg-[var(--swiper-btn-bg)] rounded w-[32px] h-[24px] flex items-center justify-center",onClick:m,children:e.jsx(b,{name:"ic_chevon_right",color:"var(--swiper-btn-text)",className:"h-3 w-3"})})]})]})}function re({games:s,handlePlay3rdGame:i,loadingGameId:o}){const{favs:d,setFav:m}=S();return e.jsxs("div",{className:"w-full relative",children:[e.jsx("div",{className:"absolute top-3 left-[50%] translate-x-[-50%] text-white text-lg font-bold uppercase",children:k.live_casino()}),e.jsxs("div",{className:"absolute flex items-center align-middle justify-center w-full gap-2 bottom-3 left-[50%] translate-x-[-50%] text-[#818181]",onClick:()=>j.navigate(F.casinoGame),children:[e.jsx("span",{children:k.all_live_casino()}),e.jsx(b,{name:"ic_chevon_right",color:"#818181",className:"w-2.5 h-2.5"})]}),e.jsx("div",{className:"flex overflow-x-auto hide-scrollbar gap-3 rounded-lg pt-12 px-3 pb-12",style:{backgroundImage:"var(--live-game-bg)"},children:s.map((n,r)=>e.jsx(V,{game:n,onClick:i,isLoading:o==n.gameId,isFav:d.includes(n.gameId),setIsFav:m},r+"-"+n.gameId))})]})}function xe(){const{i18n:{language:s}}=z(),i=D(),o=new q(i.search),{getGameByCate:d,providers:m,games:n,gameLivePair:r,setGameLivePair:g,getFilterProvider:l,favs:p,setFav:u}=S(),{closeModalCurrentSupport:G,handlePlay3rdGame:f,handleClickProvider:P,currentGame:h,supportCurrentGameListCurrency:L,currentGameRef:w,currentGameScreenLanscapeModeRef:T,thirdGameUrl:R,setThirdGameUrl:W,isShowModalCurrentSupport:A}=O(),C=B(X);c.useEffect(()=>{var a;C&&((a=C==null?void 0:C.data)==null?void 0:a.length)>0&&g(C.data)},[C]);const H=c.useMemo(()=>{var E;const a=o.findString("name",""),x=o.findString("gr",""),t=((E=Q.getInstance().getLang(s))==null?void 0:E.verticalCategories)??[],I=[];for(const U of t){const M=ae({showChat:!1}).find($=>$.type==U);M&&I.push({...M,games:d(M.code,{name:a,recent:x=="recent"})})}return I},[n,i.search,s]),_=c.useMemo(()=>{const a=o.findString("gr","");return l({recent:a=="recent"})},[i.search,m]);return e.jsxs(e.Fragment,{children:[H.map((a,x)=>a.games.length==0?e.jsx(c.Fragment,{},a.code):a.code=="future"?e.jsx(c.Fragment,{children:r.length>0&&e.jsx(N,{className:x==0?"!pt-0":"",headerProps:{icon:a.icon,title:a.verticalTitle},onClickAll:()=>j.navigate(F.futureGame),children:a.games.flatMap(t=>r.filter(I=>I.pair==t.gameCode).map(I=>e.jsx(Z,{game:t,name:t.gameName,onClick:()=>f(t),loading:h===t.gameId,future:I,isFav:p.includes(t.gameId),setIsFav:u},t.gameId)))})},a.code):a.code=="live"?e.jsx("div",{className:x==0?"":"mt-2",children:e.jsx(re,{games:a.games,handlePlay3rdGame:f,loadingGameId:h})},a.code):a.code=="lottery"?e.jsx(c.Fragment,{children:e.jsx(N,{className:x==0?"!pt-0":"",headerProps:{icon:a.icon,title:a.verticalTitle},onClickAll:()=>j.navigate(F.lotteryGame),children:[e.jsx(te,{items:a.games,onClick:f,selectedItem:h},"lottery")]})},a.code):a.code=="sport"?e.jsx(c.Fragment,{children:e.jsx(N,{className:x==0?"!pt-0":"",headerProps:{icon:a.icon,title:a.verticalTitle},onClickAll:()=>j.navigate(F.sportGame),children:a.games.map(t=>e.jsx(J,{isFav:p.includes(t.gameId),setIsFav:u,item:t,onClick:()=>f(t),loading:h==t.gameId,lang:s},t.gameId))})},a.code):e.jsx(c.Fragment,{children:e.jsx(N,{className:x==0?"!pt-0":"",headerProps:{icon:a.icon,title:a.verticalTitle},onClickAll:()=>j.navigate(a.path),children:a.games.map(t=>e.jsx(y,{classNames:`${a.games.length<3?"w-[125px]":""}`,name:"",onClick:()=>f(t),loading:h==t.gameId,game:t,isFav:p.includes(t.gameId),setIsFav:u},t.gameId))})},a.code)),_.length>0&&e.jsx("div",{className:"mt-1",children:e.jsx(N,{headerProps:{icon:"ic_provider",title:k.providers()},expandClassName:"grid grid-cols-2 md:grid-cols-3 pc:grid-cols-4 gap-2 ",children:_.map(a=>e.jsx(K,{item:a,onClick:()=>P(a),loading:h==a.code},a.code))})}),e.jsx(Y,{gameId:w.current,isLandscapeMode:T.current,gameUrl:R,onClose:()=>W(""),open:!!R}),e.jsx(ee,{supportCurrentGameListCurrency:L,onClose:()=>G(),open:A})]})}function te({items:s,onClick:i,selectedItem:o}){const{favs:d,setFav:m}=S(),n=[];if(j.isMobile()&&s.length<4||j.isPC()&&s.length<9){for(let r=0;r<s.length;r++)n.push(e.jsx("div",{className:"flex gap-2",children:e.jsx(y,{classNames:"h-[100px] w-[195px]",name:"",game:s[r],onClick:()=>i(s[r]),loading:o==s[r].gameId,isExpand:!0,isFav:d.includes(s[r].gameId),setIsFav:m},r)},s[r].gameId));return n}for(let r=0;r<s.length;r+=2){const g=[];s[r]&&g.push(e.jsx(y,{name:"",classNames:"h-[100px] w-[195px]",game:s[r],onClick:()=>i(s[r]),loading:o==s[r].gameId,isFav:d.includes(s[r].gameId),setIsFav:m},r)),s[r+1]&&g.push(e.jsx(y,{classNames:"h-[100px] w-[195px]",name:"",game:s[r+1],onClick:()=>i(s[r+1]),loading:o==s[r+1].gameId,isFav:d.includes(s[r].gameId),setIsFav:m},r+1)),g.length&&n.push(e.jsx("div",{className:"flex flex-col gap-2",children:g},s[r].gameId))}return n}export{xe as HomePage,te as LotterySwiperItems};
