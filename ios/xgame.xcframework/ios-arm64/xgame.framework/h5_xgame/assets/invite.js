import{u as b,b as h,h as j,g as N,r,R as x,a8 as i,j as e,T as a,l as _,M as y,_ as w,H as C,aj as L}from"./index.sdk-0.0.1.js";import{N as R}from"./normal-layout.js";import{b as k}from"./controller2.js";import{a as E}from"./agent2.js";import{b as $}from"./browser2.js";import{L as I}from"./popover.js";import{useHorizontalGameMenu as S}from"./home-layout.js";import"./main-layout.js";import"./lazy-load-component.js";import"./Modal.js";import"./mqtt-controller.js";import"./browser.js";import"./game.dto.js";function J(){var d,p;const{i18n:{language:m}}=b(),{extInfo:s}=h(j),[n,g]=N(k),[l,u]=r.useState(""),[o,v]=r.useState(0);r.useEffect(()=>{!(s!=null&&s.userId)||n.length>0||E(s.userId).then(t=>g(t))},[s==null?void 0:s.userId]),r.useEffect(()=>{if(n.length==0)return;const t=`${window.location.origin}${x.signup}?intrCode=${n[0].code}`;$.toDataURL(t,{errorCorrectionLevel:"Q"},(T,f)=>{u(f)})},[n]);const c=()=>{var t;return v(+L(((t=i.defaultCurrency)==null?void 0:t.sendMenoy)??0))};return r.useEffect(()=>(c(),i.addEventListener("defaultCurrencyChanged",c),()=>{i.removeEventListener("defaultCurrencyChanged",c)}),[]),e.jsx(R,{title:a.invite(),hideRightEl:!0,className:"agent-bg",headerClasses:"agent-header",contentClassName:"!bg-transparent",children:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl text-[var(--agent-invite-title)] font-semibold text-center leading-none py-3 px-8",children:a.agent_invite_title()}),e.jsx("div",{className:"bg-[url('/assets/icon/agent/invite-bg.png')] bg-contain bg-no-repeat bg-center px-8",children:e.jsxs("div",{className:"rounded-xl w-full border-2 border-[var(--active)] flex flex-col items-center px-5 pb-5 bg-[url('/assets/icon/agent/invite-card-bg.webp')] bg-cover bg-no-repeat",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"agent-trapezoid "}),e.jsx(I,{className:"h-5 absolute top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]",index:m=="hi"?"":"2"})]}),e.jsx("div",{className:"text-2xl text-white  uppercase text-center font-bold pt-2 leading-none",children:a.agent_invite_card_1()}),e.jsx("div",{className:"text-xs text-[#00af99]  uppercase text-center p-1",children:a.agent_invite_card_2()}),o!=0&&e.jsxs("div",{className:"text-lg text-[var(--active)] uppercase text-center leading-none py-2",children:[a.agent_invite_card_3()," ",o," ",(d=i.defaultCurrency)==null?void 0:d.currency]}),e.jsx(_,{src:l,className:"w-[100px]",alt:""}),e.jsx("div",{className:"text-sm text-[#d4e79e] uppercase text-center py-1",children:a.invitation_code()}),e.jsx("span",{className:"rounded-full bg-[var(--active)] px-5 py-1 leading-none text-black text-2xl font-bold",children:(p=n[0])==null?void 0:p.code}),e.jsx("div",{className:"flex mt-5 flex-wrap",children:S().map(t=>e.jsxs("div",{className:"flex items-center gap-2 w-1/3",children:[e.jsx(y,{name:t.icon,color:"var(--active)",className:"h-4 w-4"}),e.jsx("span",{className:"text-nowrap whitespace-nowrap text-sm text-[var(--text-)]",children:t.name})]},t.name))})]})}),e.jsx("div",{className:"pb-3 mt-5 px-8",children:e.jsx("div",{className:"rounded-full bg-[var(--disable)] pb-[3px]",children:e.jsx("div",{onClick:()=>{var t;return w(l,`invite_${(t=n[0])==null?void 0:t.code}.png`)},className:"rounded-full bg-[var(--active)] p-2 pt-3 text-black uppercase text-xl font-bold text-center leading-none",children:a.save_image()})})}),e.jsx("div",{className:"pb-3 px-8",children:e.jsx("div",{className:"rounded-full bg-[#f08800]",children:e.jsxs("div",{onClick:()=>C.copy(`${window.location.origin}${x.signup}?intrCode=${n[0].code}`),className:"rounded-full bg-[#ffcc00] p-2 pt-3 text-black uppercase text-xl font-bold text-center leading-none",children:[a.copy_share_link()," "]})})})]})})}export{J as AgentInvite};
