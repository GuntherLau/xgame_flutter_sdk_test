import{r as c,af as m,b as J,h as K,T as s,j as e,M as j,a8 as d,ai as v}from"./index.sdk-0.0.1.js";import{N as Q}from"./normal-layout.js";import{D as W}from"./date-picker-bottom-sheet.js";import{g as X,q as Z}from"./agent2.js";import{B as ee}from"./bottom-sheet.js";import"./main-layout.js";import"./popover.js";import"./Modal.js";import"./lazy-load-component.js";import"./Drawer.js";import"./index7.js";import"./SwipeableDrawer.js";function me(){var N,_,w,D;const[y,C]=c.useState(""),[i,R]=c.useState(null),[x,M]=c.useState(m(new Date).format("YYYY-MM-DD")),[Y,h]=c.useState(!1),[L,b]=c.useState(!1),[n,T]=c.useState(null),{extInfo:l,userInfo:o}=J(K),[p,k]=c.useState([]),[A,B]=c.useState([]),[P,E]=c.useState([]),[q,H]=c.useState(0),g=[{value:null,name:s.all_record()},{value:0,name:s.general_agent()},{value:1,name:s.level_n_agent({__num:1})},{value:2,name:s.level_n_agent({__num:2})},{value:3,name:s.level_n_agent({__num:3})},{value:4,name:s.level_n_agent({__num:4})},{value:5,name:s.level_n_agent({__num:5})},{value:6,name:s.level_n_agent({__num:6})}],I=c.useMemo(()=>i?p.filter(t=>t.dlLevel==i):p,[p,i]),U=()=>{const t=((n==null?void 0:n.busDayReportDl)??[]).map(r=>({currency:r.currency,amount:r.liveBetReport.bettingMoney+r.ftBetReport.bettingMoney+r.cpBetReport.bettingMoney}));return d.convertToSystemCurrency(t)},V=()=>{const t=((n==null?void 0:n.rwReports)??[]).map(r=>({currency:r.currency,amount:r.firstRechargeAmount}));return d.convertToSystemCurrency(t)},F=()=>{const t=((n==null?void 0:n.rwReports)??[]).map(r=>({currency:r.currency,amount:r.rechMoney}));return d.convertToSystemCurrency(t)};function O(t){h(!1);const r=m(t).format("YYYY-MM-DD");r!==x&&M(r)}const $=t=>{const r=A.filter(a=>a.userId==t).map(a=>({currency:a.currency,amount:a.rechMoney}));return d.convertToSystemCurrency(r)},z=t=>{const r=P.filter(a=>a.userId==t).map(a=>({currency:a.currency,amount:a.liveValidMoney}));return d.convertToSystemCurrency(r)},G=()=>{const t=new Date(x);t.setHours(23,59,59,999);const r=new Date(x);r.setHours(0,0,0,0),{userId:l.userId,beginDate:v(r),endDate:v(t),...i!==null&&{dlLevel:Number(o==null?void 0:o.dlLevel)+Number(i)}},X({userId:l.userId,beginDate:v(r),endDate:v(t),...i!==null&&{dlLevel:Number(o==null?void 0:o.dlLevel)+Number(i)}}).then(a=>T(a))},f=async()=>{var u,S;const t=new Date(x),r=new Date(x),a=await Z({account:y,beginDate:m(r).format("YYYY-MM-DD"),endDate:m(t).format("YYYY-MM-DD")});H(a.totalCount),B(((u=a.otherData)==null?void 0:u.rwReport)??[]),E(((S=a.otherData)==null?void 0:S.betReport)??[]),k(a.data)};return c.useEffect(()=>{l!=null&&l.userId&&f()},[x,l==null?void 0:l.userId]),c.useEffect(()=>{l!=null&&l.userId&&G()},[x,l==null?void 0:l.userId,i]),e.jsx(Q,{title:s.subordinate_data(),className:"max-w-[800px] mx-auto",hideRightEl:!0,children:e.jsxs("div",{className:"py-3",children:[e.jsxs("div",{className:"px-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-full border border-[var(--agent-searchbox-border)] pl-3 pr-1 py-1 bg-[var(--agent-searchbox-bg)] gap-3",children:[e.jsx(j,{color:"#6d6d74",name:"ic_search",className:"h-5 w-5 min-w-5"}),e.jsx("input",{type:"text",value:y,onChange:t=>C(t.target.value),placeholder:s.enter_your_member_id(),className:"bg-transparent placeholder:text-[#57575c80] placeholder:text-xs outline-none grow"}),e.jsx("button",{onClick:f,className:"text-[#908f90] bg-[var(--agent-search-btn-bg)] px-3 py-1 rounded-full uppercase text-sm font-semibold",children:s.search()})]}),e.jsxs("div",{className:"flex gap-3 py-2.5",children:[e.jsxs("div",{onClick:()=>b(!0),className:"min-w-[150px] flex items-center justify-between gap-3 text-sm text-[var(--text-content-color)] px-3 bg-[var(--agent-searchbox-bg)] rounded-full py-2",children:[(N=g.find(t=>t.value==i))==null?void 0:N.name," ",e.jsx(j,{color:"#4b4b52",name:"ic_arrow_down",className:"w-2 h-2 "})]}),e.jsxs("div",{onClick:()=>h(!0),className:"min-w-[150px] flex items-center justify-between gap-3 text-sm text-[var(--text-content-color)] px-3 bg-[var(--agent-searchbox-bg)] rounded-full py-2",children:[x," ",e.jsx(j,{color:"#4b4b52",name:"ic_arrow_down",className:"w-2 h-2 "})]})]}),e.jsxs("div",{className:"mt-1 rounded-lg bg-[var(--box-bg)] text-sm text-[#8f8f96] px-2",children:[e.jsxs("div",{className:"flex py-3",children:[e.jsxs("div",{className:"w-1/2 px-3 relative",children:[e.jsx("div",{children:s.number_of_depositors()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[(n==null?void 0:n.rechargeUserCount)??0," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:s.people()})]}),e.jsx("div",{className:"h-full w-[1px] bg-[var(--box-separator)] absolute top-0 right-0"})]}),e.jsxs("div",{className:"w-1/2 px-3 pl-4",children:[e.jsx("div",{children:s.deposit_amount()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[F()," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:(_=d.defaultCurrency)==null?void 0:_.currency})]})]})]}),e.jsx("div",{className:"h-[1px] w-full bg-[var(--box-separator)]"}),e.jsxs("div",{className:"flex py-3",children:[e.jsxs("div",{className:" w-1/2 px-3 relative",children:[e.jsx("div",{children:s.number_of_bettors()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[n==null?void 0:n.userBetCount," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:s.people()})]}),e.jsx("div",{className:"h-full w-[1px] bg-[var(--box-separator)] absolute top-0 right-0"})]}),e.jsxs("div",{className:"w-1/2 px-3 pl-4",children:[e.jsx("div",{children:s.bet_amount()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[U()," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:(w=d.defaultCurrency)==null?void 0:w.currency})]})]})]}),e.jsx("div",{className:"h-[1px] w-full bg-[var(--box-separator)]"}),e.jsxs("div",{className:"flex py-3",children:[e.jsxs("div",{className:"w-1/2 px-3 relative",children:[e.jsx("div",{children:s.number_of_first_depositors()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[n==null?void 0:n.firstRechargeUserCount," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:s.people()})]}),e.jsx("div",{className:"h-full w-[1px] bg-[var(--box-separator)] absolute top-0 right-0"})]}),e.jsxs("div",{className:"w-1/2 px-3 pl-4",children:[e.jsx("div",{children:s.first_deposit_amount()}),e.jsxs("div",{className:"text-[var(--text-color)] text-xl ",children:[V()," ",e.jsx("span",{className:"text-xs text-[#57585d]",children:(D=d.defaultCurrency)==null?void 0:D.currency})]})]})]})]})]}),e.jsxs("div",{className:"mt-3 rounded-xl",style:{background:"linear-gradient(to bottom, var(--box-bg), transparent 40%)"},children:[e.jsxs("div",{className:"flex text-xs text-[#55545c] border-b border-b-[var(--box-separator)] py-2",children:[e.jsx("span",{className:"w-1/4 text-center",children:s.tiers()}),e.jsx("span",{className:"w-1/4 text-center",children:s.account()}),e.jsx("span",{className:"w-1/4 text-center",children:s.deposit_amount()}),e.jsx("span",{className:"w-1/4 text-center",children:s.bet_amount()})]}),I.map((t,r)=>{var a,u;return e.jsxs("div",{className:"flex text-sm text-[var(--text-content-color)] border-b border-b-[var(--box-separator)] py-3",children:[e.jsx("span",{className:"w-1/4 text-center",children:t.dlLevel-((o==null?void 0:o.dlLevel)??0)==0?s.general_agent():s.level_n({__n__:t.dlLevel-((o==null?void 0:o.dlLevel)??0)})}),e.jsx("span",{className:"w-1/4 text-center",children:t.account}),e.jsxs("span",{className:"w-1/4 text-center",children:[$(t.userId)," ",e.jsx("span",{className:"text-xs",children:(a=d.defaultCurrency)==null?void 0:a.currency})]}),e.jsxs("span",{className:"w-1/4 text-center",children:[z(t.userId)," ",e.jsx("span",{className:"text-xs",children:(u=d.defaultCurrency)==null?void 0:u.currency})]})]},r)}),q>p.length&&e.jsx("div",{className:"text-center py-6 text-sm text-[#e1e2e230]",children:s.show_all()})]}),e.jsx(W,{isOpen:Y,initialDate:m(x).toDate(),onCancel:()=>h(!1),onConfirm:O,maxDate:new Date}),e.jsx(ee,{onClose:()=>{b(!1)},open:L,title:s.select_agent_level(),children:g.map((t,r)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center px-2 py-2 text-sm border-b border-b-[var(--bottomsheet-separator)]",onClick:()=>{R(t.value),b(!1)},children:e.jsx("span",{className:`${t.value==i?"text-[var(--active)] font-semibold":""}`,children:t.name})},t.name)}))})]})})}export{me as SubordinateData};
