var p=Object.defineProperty;var x=(s,e,r)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var f=(s,e,r)=>x(s,typeof e!="symbol"?e+"":e,r);import{a as S,S as v,a2 as h,r as C,H as n,q as L,G as b,j as t,Y as g}from"./index.sdk-0.0.1.js";import{M as y}from"./main-layout.js";import{G as d,c as B}from"./game.dto.js";import"./popover.js";import"./Modal.js";import"./lazy-load-component.js";var o=(s=>(s.GO_BACK="go_back",s.STATUS_BAR_COLOR="status_bar_color",s))(o||{});const a=class a{constructor(){f(this,"listeners",{});window.addEventListener("message",({data:e})=>{const r=this.listeners[e.event];r&&r.forEach(i=>{i(e.params)})})}static getInstance(){return a.instance||(a.instance=new a),a.instance}sendToParent(e){window.parent.postMessage(e,"*")}on(e,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r)}off(e,r){const i=this.listeners[e];i&&(this.listeners[e]=i.filter(c=>c!==r))}remove(e){this.listeners[e]&&(this.listeners[e]=[])}};f(a,"instance");let m=a;const l=m.getInstance();function T(){const s=S(),e=new v(s.search),r=h(e.findString("iframe","")),i=h(e.findString("referer","")),c=e.findString("category",""),w=e.findString("liveCode","");return C.useEffect(()=>(l.on(o.GO_BACK,({gameId:u})=>{if(c==d.future&&B.cg==w){n.navigate(i,{replace:!0});return}n.navigate(-1)}),l.on(o.STATUS_BAR_COLOR,u=>{n.setStatusBarColor(u)}),e.findString("category","")==d.future&&n.setStatusBarColor("#242429"),e.findString("category","")==d.hash&&n.setStatusBarColor("#1e1e22"),window.addEventListener("resize",()=>{L.emit(b.checkScreenHeight)}),()=>{l.remove(o.GO_BACK),l.remove(o.STATUS_BAR_COLOR)}),[]),n.isPC()?t.jsx(y,{title:"Embed Game",className:"max-w-[800px] mx-auto",disableHeader:!0,footerClassName:"!hidden",children:t.jsx(t.Fragment,{children:r?t.jsx("iframe",{src:r,className:"w-full h-full max-h-[var(--client-height)] costumed-Iframe grow",allow:"fullscreen; clipboard-read; clipboard-write",frameBorder:"0",loading:"lazy",title:"Payment Iframe",children:"Error"}):t.jsx(g,{className:"grow"})})}):t.jsx("div",{className:"max-w-[800px] mx-auto h-full",children:r?t.jsx("iframe",{src:r,className:"w-full h-full max-h-[var(--client-height)] costumed-Iframe grow overflow-hidden",allow:"fullscreen; clipboard-read; clipboard-write",frameBorder:"0",loading:"lazy",title:"Payment Iframe",children:"Error"}):t.jsx(g,{className:"grow"})})}export{T as EmbedGameView};
